<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="description" content="" />
		<link rel="icon" href="/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		

		

		<link rel="stylesheet" href="/_app/assets/start-61d1577b.css">
		<link rel="modulepreload" href="/_app/start-a80c730b.js">
		<link rel="modulepreload" href="/_app/chunks/vendor-9b9d6288.js">
		<link rel="modulepreload" href="/_app/pages/__layout.svelte-de46afb2.js">
		<link rel="modulepreload" href="/_app/pages/_lang_/__layout.svelte-e75718c6.js">
		<link rel="modulepreload" href="/_app/chunks/stores-191d1505.js">
		<link rel="modulepreload" href="/_app/pages/_lang_/_lessons_/_slug_/index.svelte-efe77d76.js">

		<script type="module">
			import { start } from "/_app/start-a80c730b.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":""},
				session: {},
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/_app/pages/__layout.svelte-de46afb2.js"),
						import("/_app/pages/_lang_/__layout.svelte-e75718c6.js"),
						import("/_app/pages/_lang_/_lessons_/_slug_/index.svelte-efe77d76.js")
					],
					url: new URL("sveltekit://prerender/es/lecciones/trabajar-con-paginas-web"),
					params: {lang:"es",lessons:"lecciones",slug:"trabajar-con-paginas-web"}
				}
			});
		</script><script>
			if ('serviceWorker' in navigator) {
				navigator.serviceWorker.register('/service-worker.js');
			}
		</script>
	</head>
	<body>
		<div id="svelte">


The Programming Historian <a href="/en">English</a> <a href="/es">Spanish</a>
<br>
This is the es edition.

<h1>Descargar páginas web con Python</h1>

<!-- HTML_TAG_START --><p>{% include toc.html %}</p>
<h2 id="objetivos-de-la-lección">Objetivos de la lección</h2>
<p>Esta lección muestra qué es un Localizador de recursos uniforme (<em>Uniform Resource Locator</em> = URL) y explica cómo utilizar Python para descargar y guardar los contenidos de una página web en tu disco duro.</p>
<h3 id="acerca-de-los-url">Acerca de los URL</h3>
<p>Una <em>página web</em> es un archivo que está almacenado en otra computadora, una máquina conocida como <em>servidor web</em>. Cuando tú “vas” a una página web, lo que en realidad sucede es que tu computadora (el <em>cliente</em>) envía una solicitud al servidor (el <em>alojamiento</em> o <em>host</em>) a través de la red, y el servidor responde enviándote una copia de la página a tu máquina. Una manera de ir a una página web con tu navegador es seguir un enlace a alguna otra parte. También tienes la posibilidad de pegar o escribir un localizador de recursos uniforme (URL) directamente en tu navegador. El URL le indica a tu navegador dónde encontrar un recurso en línea especificando el servidor, directorio y nombre del archivo que tiene que ser recuperado, así como el tipo de <em>protocolo</em> que tu navegador y el servidor estarán de acuerdo en usar mientras intercambian información (como HTTP o <em>protocolo de transferencia de hipertexto</em>). La estructura básica de un URL es:</p>
<pre><code>protocolo://dominio:puerto//ruta?consulta
</code></pre>
<p>Veamos algunos ejemplos.</p>
<pre><code class="language-xml">http://oldbaileyonline.org
</code></pre>
<p>El tipo más básico de URL simplemente especifica el protocolo y el alojamiento. Si introduces este URL en tu navegador, te mostrará la página principal del sitio <a href="http://oldbaileyonline.org">The Old Bailey Online</a>. Por defecto, la página principal en un directorio se denomina índice, por lo general <code>index.html</code>.</p>
<p>El URL también pude incluir un <em>número de puerto</em> opcional. Sin entrar en detalles, el protocolo de red que subyace en el intercambio de información en la Internet permite a las computadoras conectarse de diferentes maneras. Los números de puerto se usan para distinguir estas diferentes formas de conexión. Dado que, por defecto, el puerto para HTTP es el número 80, el siguiente URL es equivalente al previo.</p>
<pre><code class="language-xml">http://oldbaileyonline.org:80
</code></pre>
<p>Como sabes, generalmente hay muchas páginas en un determinado sitio web. Éstas están almacenadas en directorios del servidor y tú puedes especificar la ruta (<em>path</em>) a una página en particular. La página “Acerca de” del <em>The Old Bailey Online</em> tiene el siguiente URL:</p>
<pre><code class="language-xml">http://oldbaileyonline.org/static/Project.jsp
</code></pre>
<p>Por último, muchas páginas web te permiten introducir consultas. El sitio web <em>The Old Bailey Online</em>, por ejemplo, está diseñado de tal manera que puedes solicitar una página en particular utilizando una <a href="https://es.wikipedia.org/wiki/Query_string"><em>cadena de consulta</em></a>. EL siguiente URL te llevará a la página de resultados de búsqueda de registros de juicios criminales que contienen la palabra “arsenic” (arsénico)</p>
<pre><code class="language-xml">https://www.oldbaileyonline.org/search.jsp?form=searchHomePage&amp;_divs_fulltext=arsenic&amp;kwparse=and&amp;_persNames_surname=&amp;_persNames_given=&amp;_persNames_alias=&amp;_offences_offenceCategory_offenceSubcategory=&amp;_verdicts_verdictCategory_verdictSubcategory=&amp;_punishments_punishmentCategory_punishmentSubcategory=&amp;_divs_div0Type_div1Type=&amp;fromMonth=&amp;fromYear=&amp;toMonth=&amp;toYear=&amp;ref=&amp;submit.x=0&amp;submit.y=0
</code></pre>
<p>El fragmento de texto después de “?” representa la consulta. Puedes aprender más acerca de la construcción de consultas en <a href="/lessons/downloading-multiple-records-using-query-strings">Descarga de registros múltiples usando cadenas de consulta</a> (en inglés).</p>
<h2 id="abrir-urls-con-python">Abrir URLS con Python</h2>
<p>Como historiador digital a menudo querás utilizar los datos alojados en una base de datos académica en línea. Para obtener estos datos puedes abrir una URL a la vez y copiar y pegar su contenido a un archivo de texto, o puedes utilizar Python para hacer una cosecha por  procesamiento automático de las páginas web. Para hacer esto tienes que ser capaz de abrir cualquier URL con tus propios programas. El lenguaje Python incluye un número de formas estándar para hacer esto.</p>
<p>Como ejemplo, vamos a trabajar con una tipo de archivo que podrás encontrar haciendo investigación histórica. Digamos que te interesan las relaciones étnicas en la Gran Bretaña del siglo XVIII. The Old Bailey Online (OBO) es una rica fuente que proporciona transcripciones de juicios de 1674 a 1913 y es un buen lugar para buscar documentación.</p>
<p>{% include figure.html filename=&quot;old-bailey.png&quot; caption=&quot;Página principal del sitio The Old Bailey Online&quot; %}</p>
<p>Para este ejemplo vamos a utilizar la relatoría del juicio de Benjamin Bowsey, un “moro negro” que fue procesado por romper la paz durante las <a href="http://en.wikipedia.org/wiki/Gordon_Riots">revueltas de Gordon</a> en 1780. El URL para esa entrada es:</p>
<pre><code class="language-xml">http://www.oldbaileyonline.org/browse.jsp?id=t17800628-33&amp;div=t17800628-33
</code></pre>
<p>Si estudiamos el URL podemos aprender varias cosas. En primer lugar, OBO fue escrito en JSP (+JavaServer Pages*, un lenguaje de programación que genera HTML), y es posible obtener entradas de procesos judiciales individuales haciendo uso de cadenas de consulta. A cada proceso se le asignó, aparentemente un número de identificación (ID) (<em>id=t</em> en el URL), compuesto a partir de la fecha del juicio en formato (<em>AAAA-MM-DD</em>) y el número de proceso dentro de esa sesión de la corte, en este caso: <em>33</em>. Si cambias <code>33</code> por <code>34</code> en tu navegador y presionas Enter, eso te deberá llevar al siguiente proceso. Desafortunadamente no todos los sitios web tienen estos URL tan legibles y fiables.</p>
<p>{% include figure.html filename=&quot;bowsey-trial-page.png&quot; caption=&quot;Página de la transcripción del juicio de Benjamin Bowsey, 1780&quot; %}</p>
<p>Tómate unos minutos para ver la página del proceso contra Benjamin Bowsey. No estamos muy interesados en lo que dice la relatoría sino en la información que proporciona la página. Al final de la misma notarás que hay un enlace <a href="http://www.oldbaileyonline.org/browse.jsp?foo=bar&amp;path=sessionsPapers/17800628.xml&amp;div=t17800628-33&amp;xml=yes">View as XML</a> que te lleva a una versión de la página del texto profusamente etiquetado con <a href="https://es.wikipedia.org/wiki/Extensible_Markup_Language">XML</a> que es muy útil para cierto tipo de investigaciones. También puedes ver un escaneo del <a href="http://www.oldbaileyonline.org/images.jsp?doc=178006280084">documento original</a> que fue transcrito para hacer construir esta fuente.</p>
<p>Ahora vamos a tratar de abrir la página usando Python. Copia el siguiente programa en Komodo Edit y guárdalo como <code>abre-paginaweb.py</code> Cuando ejecutes el programa abrirá la página del proceso judicial, leerá (<code>read</code>) su contenido en una cadena de texto de Python llamada <code>contenidoWeb</code> y luego te mostrará mediante <code>print</code> los primeros trescientos caracteres de la cadena en el panel de salida de comando. Usa el comando de Firefox <code>Herramientas -&gt; Desarrollador web -&gt; Código fuente de esta página</code> (Ctrl-U) para verificar que la fuente de la página de ese URL es la misma fuente que tu programa recupera. Consulta la biblioteca de referencias de Python para saber más de <a href="https://docs.python.org/3/library/urllib.html">urllib</a>.</p>
<pre><code class="language-python"># abre-paginaweb.py

import urllib.request, urllib.error, urllib.parse

url = &#39;http://www.oldbaileyonline.org/browse.jsp?id=t17800628-33&amp;div=t17800628-33&#39;

respuesta = urllib.request.urlopen(url)
contenidoWeb = respuesta.read().decode(&#39;UTF-8&#39;)

print(contenidoWeb[0:300])
</code></pre>
<p>Estas cinco líneas de código logran mucho rápidamente. Vamos a detenernos un momento para asegurarnos de que todo está claro y que puedes reconocer los bloques que permiten que este programa haga lo que queremos que haga.</p>
<p><em>url</em>, <em>respuesta</em> y <em>contenidoWeb</em> son variables que nosotros mismos hemos llamado así.</p>
<p><em>url</em> contiene el URL de la página web que queremos descargar. En este caso, el juicio contra Benjamien Bowsey.</p>
<p>En la línea siguiente invocamos a la función <code>urlopen</code> que está almacenada en un módulo de Python llamado <code>urllib.py</code> y le hemos pedido a esa función que abra el sitio web en el URL que le especificamos. Entonces, guardamos el resultado de ese proceso en una variable denominada <em>respuesta</em>. Esta variable contiene una versión abierta del sitio web solicitado.</p>
<p>Utilizamos entonces el método <code>read</code>, que ya usamos anteriormente, para copiar el contenido de esa página web abierta en una nueva variable llamada <em>contenidoWeb</em>.</p>
<p>Asegúrate de que puedes reconocer las variables (hay 3), los módulos (1), los métodos (2) y los parámetros (1) antes de seguir adelante.</p>
<p>Al ejecutar el programa, te darás cuenta que en el panel de salida se muestra algo etiquetado en HTML:</p>
<pre><code class="language-xml">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;title&gt;Browse - Central Criminal Court&lt;/title&gt;
    &lt;meta http-equiv=&quot;content-type&quot; content=
</code></pre>
<p>El contenido del proceso judicial está mucho más adelante en la página. Lo que vemos aquí es solamente en código HTML de la parte superior del documento. Esto no es lo que necesitamos para una investigación histórica, pero no te preocupes: en breve aprenderás cómo quitar el exceso de etiquetas y obtener el contenido que estás buscando.</p>
<h2 id="guardar-una-copia-local-de-una-página-web">Guardar una copia local de una página web</h2>
<p>Dado que ya sabes lo suficiente acerca de escribir en archivos, resulta bastante sencillo modificar el programa anterior para que escriba el contenido de la cadena de texto <em>contenidoWeb</em> en un archivo local de nuestra computadora en vez de en el panel de salida. Copia el siguiente programa en Komodo Edit, guárdalo como <code>guardar-paginaweb.py</code> y ejecútalo. Abre en tu navegador el archivo creado en tu disco duro (<code>obo-t17800628-33.html</code>) para confirmar que la copia que guardaste es igual a la que está en línea.</p>
<pre><code class="language-python"># guardar-paginaweb.py

import urllib.request, urllib.error, urllib.parse

url = &#39;http://www.oldbaileyonline.org/browse.jsp?id=t17800628-33&amp;div=t17800628-33&#39;

respuesta = urllib.request.urlopen(url)
contenidoWeb = respuesta.read().decode(&#39;UTF-8&#39;)


f = open(&#39;obo-t17800628-33.html&#39;, &#39;w&#39;)
f.write(contenidoWeb)
f.close
</code></pre>
<p>Ahora, si tu puedes guardar un solo archivo así de fácil, ¿es posible escribir un programa que te permita descargar un puñado de archivos? ¿Es posible incrementar la cantidad de IDs de los juicios y obtener copias de todos ellos en una sola descarga? Efectivamente. Puedes aprender cómo hacerlo en la lección <a href="/lessons/downloading-multiple-records-using-query-strings">Downloading Multiple Files using Query Strings</a>, que te recomendamos ver una vez completadas las lecciones introductorias de esta serie.</p>
<h2 id="lecturas-sugeridas">Lecturas sugeridas</h2>
<ul>
<li>Lutz, Mark. “Ch. 4: Introducing Python Object Types”, <em>Learning
Python</em> (O’Reilly, 1999).</li>
</ul>
<h3 id="sicronización-de-código">Sicronización de código</h3>
<p>Para seguir a lo largo de las lecciones futuras es importante que tengas los archivos correctos y programas en el directorio &quot;programming-historian&quot; de tu disco duro. Al final de cada lección puedes descargar el archivo zip &quot;python-es-lecciones&quot; para asegurarte que tienes el código correcto.</p>
<ul>
<li>python-es-lecciones1.zip (<a href="/assets/python-es-lecciones1.zip">zip</a>)</li>
</ul>
<!-- HTML_TAG_END -->

<script type="application/json" data-type="svelte-data" data-url="trabajar-con-paginas-web/raw.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"metadata\":{\"title\":\"Descargar páginas web con Python\",\"authors\":[\"William J. Turkel\",\"Adam Crymble\"],\"date\":\"2012-07-17T00:00:00.000Z\",\"translation_date\":\"2017-03-15T00:00:00.000Z\",\"editors\":[\"Miriam Posner\"],\"reviewers\":[\"Miriam Posner\",\"Jim Clifford\",\"Frederik Elwert\"],\"translator\":[\"Víctor Gayol\"],\"translation-editor\":[\"Adam Crymble\"],\"translation-reviewer\":[\"Jairo A. Melo\",\"Maria José Afanador-Llach\",\"Antonio Rojas Castro\"],\"review-ticket\":\"https:\u002F\u002Fgithub.com\u002Fprogramminghistorian\u002Fph-submissions\u002Fissues\u002F42\",\"layout\":\"lesson\",\"categories\":[\"lessons\",\"python\",\"original-ph\"],\"difficulty\":2,\"activity\":\"acquiring\",\"topics\":[\"python\"],\"abstract\":\"Esta lección muestra qué es un Localizador de recursos uniforme (Uniform Resource Locator = URL) y explica cómo utilizar Python para descargar y guardar los contenidos de una página web en tu disco duro.\",\"next\":\"manipular-cadenas-de-caracteres-en-python\",\"previous\":\"reutilizacion-de-codigo-y-modularidad\",\"original\":\"working-with-web-pages\",\"python_warning\":false,\"avatar_alt\":\"Grabado de una mujer y un hombre de pies.\",\"doi\":\"10.46430\u002Fphes0029\",\"sequence\":5,\"series_total\":14},\"html_body\":\"\u003Cp\u003E{% include toc.html %}\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"objetivos-de-la-lección\\\"\u003EObjetivos de la lección\u003C\u002Fh2\u003E\\n\u003Cp\u003EEsta lección muestra qué es un Localizador de recursos uniforme (\u003Cem\u003EUniform Resource Locator\u003C\u002Fem\u003E = URL) y explica cómo utilizar Python para descargar y guardar los contenidos de una página web en tu disco duro.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"acerca-de-los-url\\\"\u003EAcerca de los URL\u003C\u002Fh3\u003E\\n\u003Cp\u003EUna \u003Cem\u003Epágina web\u003C\u002Fem\u003E es un archivo que está almacenado en otra computadora, una máquina conocida como \u003Cem\u003Eservidor web\u003C\u002Fem\u003E. Cuando tú “vas” a una página web, lo que en realidad sucede es que tu computadora (el \u003Cem\u003Ecliente\u003C\u002Fem\u003E) envía una solicitud al servidor (el \u003Cem\u003Ealojamiento\u003C\u002Fem\u003E o \u003Cem\u003Ehost\u003C\u002Fem\u003E) a través de la red, y el servidor responde enviándote una copia de la página a tu máquina. Una manera de ir a una página web con tu navegador es seguir un enlace a alguna otra parte. También tienes la posibilidad de pegar o escribir un localizador de recursos uniforme (URL) directamente en tu navegador. El URL le indica a tu navegador dónde encontrar un recurso en línea especificando el servidor, directorio y nombre del archivo que tiene que ser recuperado, así como el tipo de \u003Cem\u003Eprotocolo\u003C\u002Fem\u003E que tu navegador y el servidor estarán de acuerdo en usar mientras intercambian información (como HTTP o \u003Cem\u003Eprotocolo de transferencia de hipertexto\u003C\u002Fem\u003E). La estructura básica de un URL es:\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode\u003Eprotocolo:\u002F\u002Fdominio:puerto\u002F\u002Fruta?consulta\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EVeamos algunos ejemplos.\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-xml\\\"\u003Ehttp:\u002F\u002Foldbaileyonline.org\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EEl tipo más básico de URL simplemente especifica el protocolo y el alojamiento. Si introduces este URL en tu navegador, te mostrará la página principal del sitio \u003Ca href=\\\"http:\u002F\u002Foldbaileyonline.org\\\"\u003EThe Old Bailey Online\u003C\u002Fa\u003E. Por defecto, la página principal en un directorio se denomina índice, por lo general \u003Ccode\u003Eindex.html\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\\n\u003Cp\u003EEl URL también pude incluir un \u003Cem\u003Enúmero de puerto\u003C\u002Fem\u003E opcional. Sin entrar en detalles, el protocolo de red que subyace en el intercambio de información en la Internet permite a las computadoras conectarse de diferentes maneras. Los números de puerto se usan para distinguir estas diferentes formas de conexión. Dado que, por defecto, el puerto para HTTP es el número 80, el siguiente URL es equivalente al previo.\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-xml\\\"\u003Ehttp:\u002F\u002Foldbaileyonline.org:80\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EComo sabes, generalmente hay muchas páginas en un determinado sitio web. Éstas están almacenadas en directorios del servidor y tú puedes especificar la ruta (\u003Cem\u003Epath\u003C\u002Fem\u003E) a una página en particular. La página “Acerca de” del \u003Cem\u003EThe Old Bailey Online\u003C\u002Fem\u003E tiene el siguiente URL:\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-xml\\\"\u003Ehttp:\u002F\u002Foldbaileyonline.org\u002Fstatic\u002FProject.jsp\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EPor último, muchas páginas web te permiten introducir consultas. El sitio web \u003Cem\u003EThe Old Bailey Online\u003C\u002Fem\u003E, por ejemplo, está diseñado de tal manera que puedes solicitar una página en particular utilizando una \u003Ca href=\\\"https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FQuery_string\\\"\u003E\u003Cem\u003Ecadena de consulta\u003C\u002Fem\u003E\u003C\u002Fa\u003E. EL siguiente URL te llevará a la página de resultados de búsqueda de registros de juicios criminales que contienen la palabra “arsenic” (arsénico)\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-xml\\\"\u003Ehttps:\u002F\u002Fwww.oldbaileyonline.org\u002Fsearch.jsp?form=searchHomePage&amp;_divs_fulltext=arsenic&amp;kwparse=and&amp;_persNames_surname=&amp;_persNames_given=&amp;_persNames_alias=&amp;_offences_offenceCategory_offenceSubcategory=&amp;_verdicts_verdictCategory_verdictSubcategory=&amp;_punishments_punishmentCategory_punishmentSubcategory=&amp;_divs_div0Type_div1Type=&amp;fromMonth=&amp;fromYear=&amp;toMonth=&amp;toYear=&amp;ref=&amp;submit.x=0&amp;submit.y=0\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EEl fragmento de texto después de “?” representa la consulta. Puedes aprender más acerca de la construcción de consultas en \u003Ca href=\\\"\u002Flessons\u002Fdownloading-multiple-records-using-query-strings\\\"\u003EDescarga de registros múltiples usando cadenas de consulta\u003C\u002Fa\u003E (en inglés).\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"abrir-urls-con-python\\\"\u003EAbrir URLS con Python\u003C\u002Fh2\u003E\\n\u003Cp\u003EComo historiador digital a menudo querás utilizar los datos alojados en una base de datos académica en línea. Para obtener estos datos puedes abrir una URL a la vez y copiar y pegar su contenido a un archivo de texto, o puedes utilizar Python para hacer una cosecha por  procesamiento automático de las páginas web. Para hacer esto tienes que ser capaz de abrir cualquier URL con tus propios programas. El lenguaje Python incluye un número de formas estándar para hacer esto.\u003C\u002Fp\u003E\\n\u003Cp\u003EComo ejemplo, vamos a trabajar con una tipo de archivo que podrás encontrar haciendo investigación histórica. Digamos que te interesan las relaciones étnicas en la Gran Bretaña del siglo XVIII. The Old Bailey Online (OBO) es una rica fuente que proporciona transcripciones de juicios de 1674 a 1913 y es un buen lugar para buscar documentación.\u003C\u002Fp\u003E\\n\u003Cp\u003E{% include figure.html filename=&quot;old-bailey.png&quot; caption=&quot;Página principal del sitio The Old Bailey Online&quot; %}\u003C\u002Fp\u003E\\n\u003Cp\u003EPara este ejemplo vamos a utilizar la relatoría del juicio de Benjamin Bowsey, un “moro negro” que fue procesado por romper la paz durante las \u003Ca href=\\\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FGordon_Riots\\\"\u003Erevueltas de Gordon\u003C\u002Fa\u003E en 1780. El URL para esa entrada es:\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-xml\\\"\u003Ehttp:\u002F\u002Fwww.oldbaileyonline.org\u002Fbrowse.jsp?id=t17800628-33&amp;div=t17800628-33\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003ESi estudiamos el URL podemos aprender varias cosas. En primer lugar, OBO fue escrito en JSP (+JavaServer Pages*, un lenguaje de programación que genera HTML), y es posible obtener entradas de procesos judiciales individuales haciendo uso de cadenas de consulta. A cada proceso se le asignó, aparentemente un número de identificación (ID) (\u003Cem\u003Eid=t\u003C\u002Fem\u003E en el URL), compuesto a partir de la fecha del juicio en formato (\u003Cem\u003EAAAA-MM-DD\u003C\u002Fem\u003E) y el número de proceso dentro de esa sesión de la corte, en este caso: \u003Cem\u003E33\u003C\u002Fem\u003E. Si cambias \u003Ccode\u003E33\u003C\u002Fcode\u003E por \u003Ccode\u003E34\u003C\u002Fcode\u003E en tu navegador y presionas Enter, eso te deberá llevar al siguiente proceso. Desafortunadamente no todos los sitios web tienen estos URL tan legibles y fiables.\u003C\u002Fp\u003E\\n\u003Cp\u003E{% include figure.html filename=&quot;bowsey-trial-page.png&quot; caption=&quot;Página de la transcripción del juicio de Benjamin Bowsey, 1780&quot; %}\u003C\u002Fp\u003E\\n\u003Cp\u003ETómate unos minutos para ver la página del proceso contra Benjamin Bowsey. No estamos muy interesados en lo que dice la relatoría sino en la información que proporciona la página. Al final de la misma notarás que hay un enlace \u003Ca href=\\\"http:\u002F\u002Fwww.oldbaileyonline.org\u002Fbrowse.jsp?foo=bar&amp;path=sessionsPapers\u002F17800628.xml&amp;div=t17800628-33&amp;xml=yes\\\"\u003EView as XML\u003C\u002Fa\u003E que te lleva a una versión de la página del texto profusamente etiquetado con \u003Ca href=\\\"https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FExtensible_Markup_Language\\\"\u003EXML\u003C\u002Fa\u003E que es muy útil para cierto tipo de investigaciones. También puedes ver un escaneo del \u003Ca href=\\\"http:\u002F\u002Fwww.oldbaileyonline.org\u002Fimages.jsp?doc=178006280084\\\"\u003Edocumento original\u003C\u002Fa\u003E que fue transcrito para hacer construir esta fuente.\u003C\u002Fp\u003E\\n\u003Cp\u003EAhora vamos a tratar de abrir la página usando Python. Copia el siguiente programa en Komodo Edit y guárdalo como \u003Ccode\u003Eabre-paginaweb.py\u003C\u002Fcode\u003E Cuando ejecutes el programa abrirá la página del proceso judicial, leerá (\u003Ccode\u003Eread\u003C\u002Fcode\u003E) su contenido en una cadena de texto de Python llamada \u003Ccode\u003EcontenidoWeb\u003C\u002Fcode\u003E y luego te mostrará mediante \u003Ccode\u003Eprint\u003C\u002Fcode\u003E los primeros trescientos caracteres de la cadena en el panel de salida de comando. Usa el comando de Firefox \u003Ccode\u003EHerramientas -&gt; Desarrollador web -&gt; Código fuente de esta página\u003C\u002Fcode\u003E (Ctrl-U) para verificar que la fuente de la página de ese URL es la misma fuente que tu programa recupera. Consulta la biblioteca de referencias de Python para saber más de \u003Ca href=\\\"https:\u002F\u002Fdocs.python.org\u002F3\u002Flibrary\u002Furllib.html\\\"\u003Eurllib\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-python\\\"\u003E# abre-paginaweb.py\\n\\nimport urllib.request, urllib.error, urllib.parse\\n\\nurl = &#39;http:\u002F\u002Fwww.oldbaileyonline.org\u002Fbrowse.jsp?id=t17800628-33&amp;div=t17800628-33&#39;\\n\\nrespuesta = urllib.request.urlopen(url)\\ncontenidoWeb = respuesta.read().decode(&#39;UTF-8&#39;)\\n\\nprint(contenidoWeb[0:300])\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EEstas cinco líneas de código logran mucho rápidamente. Vamos a detenernos un momento para asegurarnos de que todo está claro y que puedes reconocer los bloques que permiten que este programa haga lo que queremos que haga.\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cem\u003Eurl\u003C\u002Fem\u003E, \u003Cem\u003Erespuesta\u003C\u002Fem\u003E y \u003Cem\u003EcontenidoWeb\u003C\u002Fem\u003E son variables que nosotros mismos hemos llamado así.\u003C\u002Fp\u003E\\n\u003Cp\u003E\u003Cem\u003Eurl\u003C\u002Fem\u003E contiene el URL de la página web que queremos descargar. En este caso, el juicio contra Benjamien Bowsey.\u003C\u002Fp\u003E\\n\u003Cp\u003EEn la línea siguiente invocamos a la función \u003Ccode\u003Eurlopen\u003C\u002Fcode\u003E que está almacenada en un módulo de Python llamado \u003Ccode\u003Eurllib.py\u003C\u002Fcode\u003E y le hemos pedido a esa función que abra el sitio web en el URL que le especificamos. Entonces, guardamos el resultado de ese proceso en una variable denominada \u003Cem\u003Erespuesta\u003C\u002Fem\u003E. Esta variable contiene una versión abierta del sitio web solicitado.\u003C\u002Fp\u003E\\n\u003Cp\u003EUtilizamos entonces el método \u003Ccode\u003Eread\u003C\u002Fcode\u003E, que ya usamos anteriormente, para copiar el contenido de esa página web abierta en una nueva variable llamada \u003Cem\u003EcontenidoWeb\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\\n\u003Cp\u003EAsegúrate de que puedes reconocer las variables (hay 3), los módulos (1), los métodos (2) y los parámetros (1) antes de seguir adelante.\u003C\u002Fp\u003E\\n\u003Cp\u003EAl ejecutar el programa, te darás cuenta que en el panel de salida se muestra algo etiquetado en HTML:\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-xml\\\"\u003E&lt;!DOCTYPE html PUBLIC &quot;-\u002F\u002FW3C\u002F\u002FDTD XHTML 1.0 Strict\u002F\u002FEN&quot; &quot;http:\u002F\u002Fwww.w3.org\u002FTR\u002Fxhtml1\u002FDTD\u002Fxhtml1-strict.dtd&quot;&gt;\\n&lt;html xmlns=&quot;http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;\\n&lt;head&gt;\\n    &lt;title&gt;Browse - Central Criminal Court&lt;\u002Ftitle&gt;\\n    &lt;meta http-equiv=&quot;content-type&quot; content=\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EEl contenido del proceso judicial está mucho más adelante en la página. Lo que vemos aquí es solamente en código HTML de la parte superior del documento. Esto no es lo que necesitamos para una investigación histórica, pero no te preocupes: en breve aprenderás cómo quitar el exceso de etiquetas y obtener el contenido que estás buscando.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"guardar-una-copia-local-de-una-página-web\\\"\u003EGuardar una copia local de una página web\u003C\u002Fh2\u003E\\n\u003Cp\u003EDado que ya sabes lo suficiente acerca de escribir en archivos, resulta bastante sencillo modificar el programa anterior para que escriba el contenido de la cadena de texto \u003Cem\u003EcontenidoWeb\u003C\u002Fem\u003E en un archivo local de nuestra computadora en vez de en el panel de salida. Copia el siguiente programa en Komodo Edit, guárdalo como \u003Ccode\u003Eguardar-paginaweb.py\u003C\u002Fcode\u003E y ejecútalo. Abre en tu navegador el archivo creado en tu disco duro (\u003Ccode\u003Eobo-t17800628-33.html\u003C\u002Fcode\u003E) para confirmar que la copia que guardaste es igual a la que está en línea.\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode class=\\\"language-python\\\"\u003E# guardar-paginaweb.py\\n\\nimport urllib.request, urllib.error, urllib.parse\\n\\nurl = &#39;http:\u002F\u002Fwww.oldbaileyonline.org\u002Fbrowse.jsp?id=t17800628-33&amp;div=t17800628-33&#39;\\n\\nrespuesta = urllib.request.urlopen(url)\\ncontenidoWeb = respuesta.read().decode(&#39;UTF-8&#39;)\\n\\n\\nf = open(&#39;obo-t17800628-33.html&#39;, &#39;w&#39;)\\nf.write(contenidoWeb)\\nf.close\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EAhora, si tu puedes guardar un solo archivo así de fácil, ¿es posible escribir un programa que te permita descargar un puñado de archivos? ¿Es posible incrementar la cantidad de IDs de los juicios y obtener copias de todos ellos en una sola descarga? Efectivamente. Puedes aprender cómo hacerlo en la lección \u003Ca href=\\\"\u002Flessons\u002Fdownloading-multiple-records-using-query-strings\\\"\u003EDownloading Multiple Files using Query Strings\u003C\u002Fa\u003E, que te recomendamos ver una vez completadas las lecciones introductorias de esta serie.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"lecturas-sugeridas\\\"\u003ELecturas sugeridas\u003C\u002Fh2\u003E\\n\u003Cul\u003E\\n\u003Cli\u003ELutz, Mark. “Ch. 4: Introducing Python Object Types”, \u003Cem\u003ELearning\\nPython\u003C\u002Fem\u003E (O’Reilly, 1999).\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\u003Ch3 id=\\\"sicronización-de-código\\\"\u003ESicronización de código\u003C\u002Fh3\u003E\\n\u003Cp\u003EPara seguir a lo largo de las lecciones futuras es importante que tengas los archivos correctos y programas en el directorio &quot;programming-historian&quot; de tu disco duro. Al final de cada lección puedes descargar el archivo zip &quot;python-es-lecciones&quot; para asegurarte que tienes el código correcto.\u003C\u002Fp\u003E\\n\u003Cul\u003E\\n\u003Cli\u003Epython-es-lecciones1.zip (\u003Ca href=\\\"\u002Fassets\u002Fpython-es-lecciones1.zip\\\"\u003Ezip\u003C\u002Fa\u003E)\u003C\u002Fli\u003E\\n\u003C\u002Ful\u003E\\n\"}"}</script></div>
	</body>
</html>
