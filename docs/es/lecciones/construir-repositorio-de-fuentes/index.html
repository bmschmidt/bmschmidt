<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="description" content="" />
		<link rel="icon" href="/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		

		

		<link rel="stylesheet" href="/_app/assets/start-61d1577b.css">
		<link rel="stylesheet" href="/_app/assets/pages/__layout.svelte-18e41d87.css">
		<link rel="modulepreload" href="/_app/start-95fbef14.js">
		<link rel="modulepreload" href="/_app/chunks/vendor-8de6a194.js">
		<link rel="modulepreload" href="/_app/pages/__layout.svelte-a3da538f.js">
		<link rel="modulepreload" href="/_app/chunks/stores-55c0c2f0.js">
		<link rel="modulepreload" href="/_app/chunks/translate-48f5a27b.js">
		<link rel="modulepreload" href="/_app/pages/_lang_/_lessons_/_slug_/index.svelte-f85508fc.js">
		<link rel="modulepreload" href="/_app/chunks/markdown-a73b7c4d.js">

		<script type="module">
			import { start } from "/_app/start-95fbef14.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":""},
				session: {},
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/_app/pages/__layout.svelte-a3da538f.js"),
						import("/_app/pages/_lang_/_lessons_/_slug_/index.svelte-f85508fc.js")
					],
					url: new URL("sveltekit://prerender/es/lecciones/construir-repositorio-de-fuentes"),
					params: {lang:"es",lessons:"lecciones",slug:"construir-repositorio-de-fuentes"}
				}
			});
		</script><script>
			if ('serviceWorker' in navigator) {
				navigator.serviceWorker.register('/service-worker.js');
			}
		</script>
	</head>
	<body>
		<div id="svelte">


<div class="collapse navbar-collapse" style="display:flex" id="navbarNavDropdown"><h2>Programming Historian en español</h2>
	<a class="nav-link" href="/es/lecciones">Lecciones</a><a class="nav-link" href="/es/acerca-de">Acerca</a><a class="nav-link" href="/es/investigacion">Investigación</a><a class="nav-link" href="/es/apoyanos">Apóyanos</a>
<div class="btn-group" role="menuitem" aria-label="Language selector"><a class="btn btn-secondary nav-link" role="button" href="/en">en</a><a class="btn btn-secondary nav-link active" role="button" href="/es">es</a><a class="btn btn-secondary nav-link" role="button" href="/fr">fr</a><a class="btn btn-secondary nav-link" role="button" href="/pt">pt</a></div></div>


<br>
<h1>Construir un repositorio de fuentes históricas con Omeka Classic
</h1>

<!-- HTML_TAG_START --><h1>Contenido</h1>
<p>{% include toc.html %}</p>
<h1>Antes de empezar</h1>
<p>Actualmente el <a href="https://omeka.org" target="_blank">proyecto Omeka</a> se encuentra dividido en tres productos: Omeka Classic, una plataforma de publicación Web para construir y compartir colecciones digitales; Omeka.net, un servicio de alojamiento web específicamente diseñado para Omeka; y Omeka Semantic o S, lanzada en 2017, enfocada en la conexión de las colecciones con la Web semántica. Esta lección se basa en Omeka Classic[^version] por estar enfocada en proyectos particulares, de individuos o grupos medianos. Para construir grandes colecciones institucionales de documentos, bibliotecas o archivos, recomendamos usar Omeka S.</p>
<div class="alert alert-warning">
  Esta lección plantea modificaciones menores a la base de datos y archivos de la plataforma. Antes de iniciar realice una copia de seguridad de toda la instalación o haga las pruebas con una instalación nueva que no comprometa información actualmente en uso.
</div>
<p>Algunos de los ejercicios planteados en esta lección requieren un repositorio con una cantidad de elementos (por lo menos una decena). Para facilitar el ejercicio puede descargar un dataset con elementos, colecciones y tipos de elementos desde <a href="/assets/construir-repositorio-de-fuentes/tutorial.sql">este archivo</a>.</p>
<h1>Introducción</h1>
<p>La abundancia de información documental que tenemos a disposición es cada vez mayor. Las fuentes primarias que se encuentran publicadas por archivos y bibliotecas han facilitado significativamente nuestro trabajo de recolección de información histórica. Sin embargo, esto ha conllevado un problema de abundancia de digitalizaciones y transcripciones de documentos que muchas veces quedan almacenadas anárquicamente en nuestros ordenadores. En esta lección aprovecharemos las capacidades de Omeka para desarrollar repositorios, individuales o colaborativos, para almacenar, analizar y exhibir fuentes primarias; con el propósito de presentar una opción para la sistematización de documentación primaria que posteriormente podrá ser utilizada en tareas de investigación o exhibiciones Web.</p>
<p>Para seguir esta lección requieres una instalación de Omeka. Puedes seguir la lección <a href="/lessons/installing-omeka"><em>Installing Omeka</em></a> disponible en el sitio en inglés (la versión en español se encuentra en proceso de traducción). En caso de que necesites conocer el funcionamiento básico de la plataforma es importante que entiendas como <a href="/es/lecciones/poniendo-omeka-a-funcionar">crear sitios, elementos, colecciones</a> y <a href="/es/lecciones/crear-exposicion-con-omeka">exhibiciones</a>.</p>
<p>Asimismo es importante que en caso de querer ampliar la información sobre el funcionamiento de Omeka recurras al <a href="https://omeka.org/classic/docs/" target="_blank">manual de usuario</a> de la versión clásica. También es posible que consultes o participes en el <a href="https://forum.omeka.org/c/omeka-classic" target="_blank">foro</a> para obtener información adicional o respuesta a un problema específico.</p>
<h1>Instalación local de Omeka</h1>
<p>Instalar un servidor Web en tu ordenador brinda la posibilidad de ejecutar aplicaciones como Omeka de manera privada y gratuita; lo que representa una ventaja significativa para experimentar con proyectos que aún se encuentren en desarrollo o para utilizar Omeka con información privada que no se desea subir a un servidor Web accesible desde la Internet.</p>
<p>La arquitectura de Omeka está basada en PHP-MySQL, esto significa que la información que se agrega, modifica y lee desde el entorno de la plataforma escrito en <a href="https://es.wikipedia.org/wiki/PHP" target="_blank">PHP</a>; queda almacenada en una base de datos <a href="https://es.wikipedia.org/wiki/MySQL" target="_blank">MySQL</a>; y se procesa mediante un servidor <a href="https://en.wikipedia.org/wiki/Apache_HTTP_Server" target="_blank">Apache</a>. No es necesario entender exactamente el funcionamiento de la tecnología de servidor (se requeriría de una especialización en informática para ello), pero es importante familiarizarse con los conceptos de servidor Web, plataforma y base de datos para los ejercicios posteriores.</p>
<p>El sentido básico de este esquema puede resumirse con la siguiente imagen:</p>
<p>{% include figure.html filename=&quot;img_1.1.jpg&quot; caption=&quot;Síntesis de la tecnología de servidor&quot; %}</p>
<p>Para realizar la instalación local y configurar Omeka en tu ordenador, te recomendamos seguir las instrucciones del paso 2A de la lección <a href="/en/lessons/installing-omeka#step-2a-for-vps-hosting"><em>Installing Omeka</em></a>. También es recomendable consultar el <a href="http://www.rubenalcaraz.es/manual-omeka/" target="_blank">manual elaborado por Manuel Alcaraz</a> (bibliotecónomo con grado en ingeniería informática), en el cual cubre los aspectos necesarios para gestionar una instalación en Omeka desde la interface de administración del sitio.</p>
<p>En este tutorial te ayudaremos a instalar una <a href="https://es.wikipedia.org/wiki/M%C3%A1quina_virtual" target="_blank">máquina virtual</a>, es decir, una serie de programas que permiten <a href="https://es.wikipedia.org/wiki/Script_del_lado_del_servidor" target="_blank">ejecutar aplicaciones que requieren tecnología de servidor</a> (como Omeka) sin necesidad de tener contratado un servidor Web. También te mostraremos una forma común de gestionar la base de datos a través del aplicativo <a href="https://es.wikipedia.org/wiki/PhpMyAdmin" target="_blank">phpMyAdmin</a>, una herramienta ampliamente difundida para administrar MySQL.</p>
<h2>Instalar la máquina virtual</h2>
<p>Para los fines de esta lección usaremos el entorno <a href="https://www.apachefriends.org/es/index.html" target="_blank">XAMPP</a>, disponible para Windows, Linux y OS X. Después de descargar el paquete correspondiente a su sistema operativo instale el entorno siguiendo las instrucciones del instalador.[^xampp_instrucciones] A continuación le solicitará que escoja un directorio para albergar los archivos de la máquina virtual, en nuestro caso realizamos la instalación en Windows 10 y escogeremos la opción predeterminada <code>C:\xampp</code>; en el caso de Linux-Ubuntu será obligatoriamente <code>/opt/lampp</code> y en Mac OS X <code>/aplications/XAMPP</code>.</p>
<p>Para ejecutar el instalador en Linux deberás iniciar la terminal y dirigirte al directorio donde lo descargarte y hacerlo ejecutable mediante el siguiente comando (recuerda cambiar el nombre del ejemplo por el del archivo que descargaste):</p>
<pre><code class="language-terminal">sudo chmod +x xampp-linux-x64-7.2.10-0-installer.run
</code></pre>
<p>Luego ejecuta el archivo mediante el comando:</p>
<pre><code class="language-terminal">sudo ./xampp-linux-x64-7.2.10-0-installer.run
</code></pre>
<p>A partir de allí sigue las instrucciones del instalador.</p>
<p>Tras la instalación, la primera acción que debemos realizar será activar los módulos &quot;Apache&quot; y &quot;MySQL&quot; para poner a funcionar nuestro servidor.[^advertencia_Ubuntu] Para eso sólo debes hacer click en los botones &quot;Start&quot; de la columna &quot;Actions&quot;, tras lo cual los módulos se pondrán de color verde.</p>
<p>{% include figure.html filename=&quot;img_1.1-modact.jpg&quot; caption=&quot;Módulos XAMPP activados&quot; %}</p>
<p>Para probar que todo funciona correctamente, ingresa desde tu navegador a la dirección <a href="http://localhost/">http://localhost/</a> o <a href="http://127.0.0.1">http://127.0.0.1</a>. Si la instalación es correcta te mostrará la pantalla de inicio:</p>
<p>{% include figure.html filename=&quot;img_1.1-xampp-dashboard.jpg&quot; caption=&quot;Pantalla de inicio (dashboard) de XAMPP&quot; %}</p>
<p>Deberás tener en el menú de inicio de Windows un menú de XAMPP con tres opciones desplegables. Las más útiles para nuestro trabajo serán &quot;XAMPP Control Panel&quot;, que abre el panel de control para activar o desactivar los módulos, y &quot;XAMPP htdocs folder&quot;, un enlace al directorio donde se guardarán los archivos de Omeka para realizar la instalación, por lo general es <code>C:\xampp\htdocs</code> para Windows. En Linux este directorio se encuentra en la ruta <code>/opt/lampp/htdocs</code>.</p>
<p>Errores comunes en Windows que pueden surgir de este proceso pueden derivarse de haber instalado la máquina virtual sin desactivar el antivirus, conflictos con otras máquinas virtuales previamente instaladas, o haber escogido un directorio, para el caso de Windows 10, en la carpeta <code>C:\Program Files (x86)</code>. En todos estos casos la opción más sencilla consiste en reinstalar la máquina y evitar estas advertencias.</p>
<p>En el caso de Linux tal vez sea necesario instalar instancias adicionales como &quot;net-tools&quot;. Si va a utilizar XAMPP de manera frecuente lo más recomendable es crear un <em>script</em> para iniciar la aplicación automáticamente en cada reinicio del ordenador.</p>
<h2>Gestionar las bases de datos desde <em>phpMyAdmin</em></h2>
<p>Para la instalación de Omeka es necesario crear una base de datos que albergará información que permite relacionar elementos, tipos de elementos, colecciones, entre sí y con otros objetos, como textos, documentos o imágenes.</p>
<p>Para crear la base de datos es posible utilizar los métodos explicados en el paso 2 de <a href="/en/lessons/installing-omeka#step-2-install-your-server-and-database"><em>Installing Omeka</em></a>. También podemos utilizar <em>phpMyAdmin</em> para crear la base de datos de la instalación e incluso para editarla después.</p>
<p>El primer paso consiste en ingresar al entorno de <em>phpMyAdmin</em> a través de la dirección <a href="http://localhost/phpmyadmin/">http://localhost/phpmyadmin/</a> XAMPP te dejará ingresar sin contraseña, pero otros servicios (como Bitnami) te exigirán permisos de usuario para ingresar.[^bitnami_ingreso] La página de inicio te mostrará una página con la configuración general del servidor de la base de datos, el servidor web y de la aplicación. Esta pantalla será importante al momento de requerir la versión de MySQL (&quot;Servidor de base de datos &gt;&gt; Versión del servidor&quot;), la versión de PHP (&quot;Servidor web &gt;&gt; Versión de PHP&quot;), o incluso el nombre de usuario del servidor (por lo general &quot;root@localhost&quot;). Esta pantalla es útil no sólo en instalaciones locales, servirá también para comprobar que algún servicio de alojamiento web corresponda con la tecnología necesaria para ejecutar ciertas aplicaciones.</p>
<p>En <em>phpMyAdmin</em> seleccionaremos la pestaña &quot;Bases de datos&quot; donde veremos un pequeño formulario para crear la base de datos, sólo tenemos que ingresar el <em>nombre de la base de datos</em> e indicar el <em>cotejamiento</em>. Seleccionaremos el cotejamiento <code>utf8_spanish_ci</code> ya que representará una mayor precisión al momento de ordenar los elementos (<em>items</em>) en Omeka.[^collate] Esto es particularmente relevante en las instalaciones en Linux que suelen seleccionar de manera predeterminada un cotejamiento <code>latin1_</code>.</p>
<p>{% include figure.html filename=&quot;img_1.2-crear-baseddatos.jpg&quot; caption=&quot;Crear base de datos en phpMyAdmin&quot; %}</p>
<p>Después de crear la base de datos la plataforma lo llevará al escritorio donde podrá gestionar las tablas, ejecutar código SQL, importar y exportar tablas, gestionar los permisos de los usuarios, entre otras acciones. Por el momento la base de datos estará vacía puesto que no hemos creado ninguna tabla. Asegúrese de que haya un usuario vinculado a la base de datos (pestaña &quot;Privilegios&quot;) y que tenga todos los privilegios. En caso contrario puede seleccionar &quot;editar privilegios&quot; y hacer clic en la casilla &quot;Seleccionar todo&quot;. También puede crear y dar permisos a otros usuarios (sólo en caso de administrar colaborativamente la base de datos) desde el menú &quot;Agregar cuenta de usuario&quot;.</p>
<p>Antes de salir anota los siguientes datos que te servirán para <a href="/en/lessons/installing-omeka#step-4-configure-omeka-to-use-your-database">configurar el archivo db.ini</a>:</p>
<ul>
<li>Nombre del servidor</li>
<li>Nombre de la base de datos</li>
<li>Nombre de usuario</li>
<li>Contraseña del usuario</li>
</ul>
<h3>Cambiar el idioma a español</h3>
<p>La configuración predeterminada de Omeka hace que la interface del respositorio se muestre en inglés. Lastimosamente, el panel de administración no tiene una opción para seleccionar el idioma y hacer que el sitio se muestre en español. Por lo tanto, debemos hacer este cambio de manera manual modificando el archivo <code>config.ini</code> que se encuentra en el directorio <code>application/config</code>. Desde un editor de texto o de código abre el archivo y busca la línea que dice <code>locale.name = &quot;&quot;</code> y entre paréntesis escribe la palabra &quot;es&quot;, que corresponde al código de lenguaje ISO 639 para el castellano.</p>
<p>{% include figure.html filename=&quot;image_1.3-locale.png&quot; caption=&quot;cambiar idioma a español en la configuración&quot; %}</p>
<h3>Paso extra en Linux</h3>
<p>Aunque la instalación de Omeka no debería representar un problema, es necesario tener en cuenta que para las instalaciones en Linux se deben asegurar los permisos de escritura de los directorios que almacenarán los archivos. Para ello, antes de iniciar la instalación ejecute el siguiente comando en la terminal:</p>
<pre><code class="language-terminal">sudo chmod -R 777 /opt/lampp/htdocs/dirección_del_repositorio/files
</code></pre>
<p>Esto debería permitir el inicio de la instalación.</p>
<h3>Otro paso extra</h3>
<p>Es opcional, aunque muy recomendable, que en tanto el repositorio se encuentre en desarrollo se activen los mensajes de error. Existen dos opciones, una pública y una privada:</p>
<ul>
<li>Opción pública: En el archivo <code>.htaccess</code> del directorio raíz, retira el signo de comentario (<code>#</code>) en la línea <code>#SetEnv APPLICATION_ENV development</code>. Los mensajes de error se mostrarán en la página de inicio.</li>
<li>Opción privada: Edita el archivo <code>application/config/config.ini</code> y cambia el valor de la opción 'logging' de falso a verdadero: <code>log.errors = true</code>. Los errores se verán en el archivo <code>application/logs/errors.log</code>. Asegúrate que el archivo <code>errors.log</code> tiene permisos de escritura, de otro modo no funcionará.</li>
</ul>
<h1>Un vistazo al &quot;esqueleto&quot; de Omeka</h1>
<p>Si vamos a <a href="http://localhost/phpmyadmin">phpMyAdmin</a> veremos que la base de datos vacía está ahora llena con 19 tablas interdependientes. La estructura de la base de datos (<em>database schema</em>) puede describirse de manera sintética agrupando las tablas en cinco grupos de información: datos para los elementos y colecciones, etiquetas, metatados de los tipos de elementos, información de usuarios, texto para búsqueda, y tablas para procesos del sistema. Un mapa resumido de las interdependencias entre las tablas se puede ver en la siguiente imagen:</p>
<p>{% include figure.html filename=&quot;img_2.1-omeka_mysql_schema.png&quot; caption=&quot;Esquema de la interdependencia de la base de datos de Omeka&quot; %}</p>
<p>Como en un circuito eléctrico, cada tabla contiene información necesaria para un conjunto de procesos, por ejemplo, cuando se muestra un elemento se toma información de las tablas <code>omeka_collections</code> y <code>omeka_elements_text</code>, pero, para saber cuál texto corresponde a cual elemento y colección las interrelaciona en la tabla <code>omeka_items</code> que cruza el número de identificación de la colección con el del elemento. A medida que vayamos progresando en esta lección se hará más claro el funcionamiento de la base de datos.</p>
<p>Además de la base de datos, Omeka funciona gracias a los archivos que permiten leer la información para mostrarla en una página web y los formularios que hacen posible ingresar nueva información en la base de datos sin necesidad de hacerlo directamente en las tablas, un proceso que sería demasiado tedioso como para ser funcional.</p>
<p>Al instalar Omeka exploramos un poco el directorio raíz de la plataforma, específicamente la carpeta <code>application\config</code>. No vamos a explorar a profundidad la estructura de archivos de Omeka, pero quisiera indicar algunos directorios claves para el manejo avanzado de la plataforma:</p>
<ol>
<li><code>/plugins</code>: En esta dirección se almacenan los paquetes de &quot;plugins&quot; o complementos que añaden capacidades adicionales a la plataforma. De manera predeterminada vienen incorporados &quot;CoinS&quot; (lectura de metadatos bibliográficos en HTML), &quot;ExhibitBuilder&quot; (crear presentaciones) y &quot;SimplePages&quot; (crear páginas). Otros &quot;plugins&quot; pueden descargarse de <a href="https://omeka.org/classic/plugins/">https://omeka.org/classic/plugins/</a></li>
<li><code>/themes</code>: El directorio de las plantillas de Omeka. Con la instalación se incluyen tres temas: &quot;default&quot; (&quot;Thanks, Roy&quot;), Berlin y Seasons. Estos tres temas presentan las configuraciones clásicas de Omeka a partir de las cuales se desarrollan las plantillas disponibles en <a href="https://omeka.org/classic/themes/">https://omeka.org/classic/themes/</a>, que para instalarse deben subirse o copiarse a este directorio.</li>
<li><code>/files</code>: En este directorio se guardan las imágenes en sus diferentes tamaños después de haberse subido y pasado por ImageMagick, también los PDF y cualquier otro archivo que se haya subido por medio de la plataforma. Cada archivo es renombrado con una cadena alfanumérica aleatoria que asegura la identificación del objeto. El nombre original con el cual fue subido el archivo se almacena en la columna <code>original_filename</code> de la tabla <code>omeka_files</code>.</li>
<li><code>/application</code>: Este directorio puede considerarse como el corazón de la plataforma y contiene los archivos que hacen funcionar los complementos, los temas, las páginas de búsqueda, etc. Sólo mencionaré dos subcarpetas de cierta relevancia: <code>\application\config</code> que ya conocemos, y <code>application\languages</code>, que alberga los archivos de traducción de la plataforma en formato <code>.mo</code>. El archivo para el idioma español se llama <code>es.mo</code> y puede ser editado en caso de requerirse modificar alguna expresión o palabra[^transifex].</li>
</ol>
<p>La mayoría de los proyectos que involucran Omeka tendrán que interactuar con los dos primeros directorios y, dependiendo de la complejidad del desarrollo, con los demás.</p>
<p>Lo importante, tanto para la base de datos como para el directorio de archivos, consiste en familiarizarse con la plataforma y de esta manera responder ante una falla de manera más rápida, lo cual es además de gran utilidad al momento de hacer una consulta en un <a href="https://forum.omeka.org/" target="_blank">foro de soporte</a> o buscar una posible solución en la web.</p>
<h1>Exportar e importar información de la base de datos</h1>
<h2>Crear una copia de seguridad de la base de datos</h2>
<p>Cuando vas a actualizar la plataforma, modificar un archivo de la instalación, editar la base de datos, o probar con un plugin experimental; siempre es recomendable realizar una copia de seguridad de la base de datos. De hecho, es una buena práctica hacerlo periódicamente para así tener un respaldo de nuestra información.</p>
<p>La manera más recomendable para respaldar la base de datos consiste en exportarla a una dirección local o remota. Para ello, solamente tenemos que seleccionar la opción &quot;Exportar&quot; en phpMyAdmin. El método rápido de exportación es recomendado para realizar los respaldos ya que incluye todas las tablas y el contenido de estas. Si solamente deseas exportar una parte, renombrar la base de datos, tablas o columnas; agregar opciones para reescribir y crear tablas, o escoger un tipo de sintaxis; puedes escoger el modo perdonalizado de exportación.</p>
<p>{% include figure.html filename=&quot;img_3.1-omeka_dump_mysql.png&quot; caption=&quot;Exportar tablas de la base de datos de Omeka&quot; %}</p>
<p>También puedes exportar la información en formatos como <code>csv</code>, <code>JSON</code>, <code>xml</code>, e incluso en <code>YAML</code>. Sin embargo, las opciones personalizadas son mucho más limitadas en estos formatos, por lo que no son ideales para realizar copias de seguridad.</p>
<p>Si realizas una exportación personalizada es recomendable que evites seleccionar la opción <code>CREATE DATABASE</code>, ya que esto podría generar problemas de importación.</p>
<h2>Importar el dataset</h2>
<p>Para mayor comodidad en la experimentación, creé un pequeño dataset con elementos, colecciones, etiquetas y tipos de elemento. Este contiene exclusivamente las tablas <code>omeka_collections</code>, <code>omeka_elements</code>, <code>omeka_element_sets</code>, <code>omeka_element_texts</code>, <code>omeka_items</code>, <code>omeka_item_types</code>, <code>omeka_item_types_elements</code>, <code>omeka_search_texts</code>, <code>omeka_tags</code>.</p>
<p>Añadí la opción <code>DROP TABLE</code>, de tal manera que al hacer la importación se reemplacen las tablas existentes. <div class="alert alert-warning">No importe este dataset en una instalación que tenga contenido o borrará la información existente.</div></p>
<p>Para importar el dataset, lo haremos también en phpMyAdmin desde la pestaña &quot;Importar&quot;. Solamente deberemos seleccionar el archivo y comprobar que la opción &quot;Conjunto de caracteres del archivo&quot; sea &quot;utf-8&quot; y que el &quot;Formato&quot; sea &quot;SQL&quot;.</p>
<p>{% include figure.html filename=&quot;img_3.2-omeka_import_mysql.png&quot; caption=&quot;Importar tablas de la base de datos de Omeka&quot; %}</p>
<p>Para comprobar que la instalación ha sido exitosa, solamente debe navegar a su página de Omeka y desde allí revisar que los elementos hayan sido instalados.</p>
<h3>Solución de problemas</h3>
<p>Es probable que al importar una base de datos aparezca el mensaje de error #1050 <code>la tabla 'xyz' ya existe</code>. En ese caso será necesario eliminar las tablas o toda la base de datos desde la pestaña &quot;Estructura&quot; para poder proseguir con la importación.</p>
<h1>Metadatos en Omeka</h1>
<p>Para muchos la palabra &quot;Metadatos&quot; suena oscura y &quot;metafísica&quot;, algo que está más allá de los datos. Sin embargo, el sentido de los <em>metadata</em> es mucho más sencillo, signfica simplemente datos acerca de los datos (<em>data about data</em>) que tienen la función de indicarle a las computadoras dónde se encuentra un objeto digital. Por ejemplo, una fotografía de la capilla sixtina es sólo un conjunto de bits compilados en un archivo de imagen, por ejemplo <code>jpg</code> o <code>png</code>; pero el nombre que le otorgamos al archivo (por ejemplo, &quot;capilla_sixtina-jpg&quot;) ya es un metadato que ayuda a humanos y máquinas a encontrar la fotografía de ese edificio. Ahora, si a ese archivo, además del nombre le asociamos otros indicadores como fecha, lugar, quién tomó la fotografía, algunas palabras que describan el tipo de objeto de la imagen (por ejemplo: capilla católica, religión, arquitectura del siglo XV), otros objetos con los que está relacionada, etc.; estamos hablando entonces de un &quot;conjunto de metadatos&quot; o <em>metadata set</em>.</p>
<p>Los metadatos son independientes del lenguaje de máquina o de programación, es decir, son categorías completamente personalizables que funcionan de manera independiente de la plataforma. Esta libertad conlleva una gran desventaja y es que si cada usuario creara sus elementos de manera arbitraria no habría manera de intercambiar información entre sistemas. Por esa razón, se creó una estrategia de estandarización de los conjuntos de metadatos de tal manera que facilite la interacción entre plataformas, la actualización del software y, sobre todo, el compartir y encontrar información en grandes repositorios.</p>
<p>Omeka Classic se fundamenta en el estándar <em>Dublin Core</em>, específicamente en el esquema básico de 15 descriptores <a haref="http://dublincore.org/documents/dces/" target="_blank">Dublin Core Metadata Element Set Version 1.1</a>:</p>
<pre><code>Título (title)
Autor (creator)
Palabras claves (subject)
Descripción (description)
Editor (publisher)
Colaborador (contributor)
Fecha (date)
Tipo de recurso (type)
Formato (format)
Identificador (identifier)
Fuente (source)
Lenguaje (language)
Relación con otros objetos (relation)
Cobertura espacial (coverage)
Derechos (rights)
</code></pre>
<p>Por medio de estos elementos es posible describir la mayoría de los objetos digitales: textos, imágenes, audio, video y multimedia. Esto no implica que todo elemento tenga que tener un archivo adjunto para visualizar en la plataforma (aunque es lo ideal). Puede funcionar de modo similar a un catálogo de una biblioteca, archivo o museo.</p>
<p>Sin embargo, como habrás notado, este listado de descriptores es bastante limitado. ¿Dónde indicarías una dirección Web, un nombre, un texto? Para eso, Omeka diseñó la opción &quot;tipos de elemento&quot;, en la cual se pueden agrupar los objetos por sus características generales. De manera predeterminada se encuentran disponibles los tipos texto, imagen en movimiento, historia oral, sonido, imágen estática, sitio Web, evento, correo electrónico, plan de curso, hiperenlace, entre otros. El usuario puede añadir otros tipos según sus necesidades a través del menú &quot;tipos de elemento&quot; en el panel de administración (<code>/admin/item-types</code>) o editar los tipos disponibles agregando descriptores disponibles de manera predeterminada o creando nuevos elementos.</p>
<p>Los tipos de metadatos son importantes porque nos ayudan a agrupar la información. Por ejemplo, si tenemos varios tipos de texto en un mismo repositorio podría se útil crear una categoría para aquellos que tengan una estructura particular. Por ejemplo, si estamos guardando descripciones de cartas y expedientes judiciales en un mismo proyecto sería recomendable separar ambos tipos para que no se agrupen todos como &quot;texto&quot;. Para ello, crearemos un tipo de elemento con las siguientes categorías: delito, índice, sindicado, juez, sentencia, y texto.</p>
<p>Desde el menú &quot;Agregar tipo de elemento&quot; rellenamos el formulario con un nombre para el nuevo tipo de elemento y una descripción opcional.</p>
<p>{% include figure.html filename=&quot;img_4.1-omeka_add_element_type.png&quot; caption=&quot;Agregar tipo de elemento&quot; %}</p>
<p>Para incluir los descriptores debemos utilizar el menú &quot;Agregar elementos&quot;, ubicado al final del formulario. Si el elemento ya existe en el vocabulario predeterminado simplemente dejamos señalada la opción &quot;Existentes&quot; y lo escogemos desde la lista desplegable.</p>
<p>{% include figure.html filename=&quot;img_4.2-omeka_add_elements.png&quot; caption=&quot;Agregar elementos existentes&quot; %}</p>
<p>Para crear los descriptores personalizados simplemente marcamos la opción &quot;Nuevo&quot; y rellenamos el formulario.</p>
<p>{% include figure.html filename=&quot;img_4.3-omeka_add_elementsnew.png&quot; caption=&quot;Agregar elementos nuevos&quot; %}</p>
<p>Al finalizar debe aparecer un listado con los formularios diligenciados y los elementos existentes escogidos. Para completar el tipo pulsa el botón &quot;Agregar tipo de elemento&quot;, tras lo cual se mostrará una pantalla de confirmación, con la descripción del tipo y los elementos asociados.</p>
<p>{% include figure.html filename=&quot;img_4.4-omeka_add_element_type.png&quot; caption=&quot;Agregar tipo de elemento&quot; %}</p>
<p>Para utilizar el tipo de elemento, solamente debes seleccionar la pestaña &quot;Metadatos de tipo de elemento&quot; al momento de agregar un nuevo elemento, y en el menú desplegable seleccionar el tipo que creaste.</p>
<p>{% include figure.html filename=&quot;img_4.5-omeka_metadata_type_element.png&quot; caption=&quot;Seleccionar tipo de elemento&quot; %}</p>
<h3>Vocabulario controlado y ontologías</h3>
<p>Para terminar con el tema de los metadatos, es importante entender que toda la información que guardamos en las categorías son cadenas de texto, es decir, si en el elemento &quot;Fuente&quot; escribimos &quot;Casa&quot; no hay ninguna advertencia que indique que esa palabra no corresponde con el elemento. Para evitar lo anterior, se recomienda recurrir a vocabularios controlados, que no son otra cosa sino los términos que coinciden con cada elemento y que son consistentes a lo largo del repositorio. Para los proyectos institucionales se requiere de un esfuerzo importante en términos de interoperabilidad para que los objetos puedan ser recuperados de manera correcta. También es necesario en este sentido la adopción o desarrollo de &quot;ontologías&quot;, es decir, de una organización jerárquica de los componentes que representan un objeto de información (también denominada &quot;taxonomía&quot;). Al respecto, un buen punto de partida puede ser la lección de Jonathan Blaney <a href="/es/lecciones/introduccion-datos-abiertos-enlazados">Introducción a los Datos abiertos enlazados</a>.</p>
<p>Si estamos construyendo un sitio personal no es necesario (aunque sería lo ideal) recurrir a un vocabulario controlado o una ontología; sin embargo, es casi imprescindible ser consistentes con la forma de insertar la información. Por ejemplo, si incluimos en el elemento Autor el nombre &quot;Pérez, Pedro&quot; debemos tener la cautela de que todos los nombres que ingresemos posteriormente cumplan con el formato &quot;Apellido, Nombre&quot;. De la misma manera, la gestión de los metadatos debe evitar la ambigüedad, de tal manera que si el nombre no es de un autor sino, por ejemplo, un juez, pueda hacer la búsqueda en ese campo y no en otro. Por otra parte, como la información se almancena en formato de texto las fechas se ordenan alfabéticamente, por ello es indispensable seguir la recomendación de Dublin Core que señala el formato año, mes, día (AAAA/MM/DD) para los elementos temporales. Igualmente, es importante ser riguroso al ingresar la información para evitar que la fecha de un evento se confunda con la fecha de publicación de la fuente, por ejemplo.</p>
<h1>Plugins o complementos</h1>
<p>Un plugin es un pequeño programa que añade una función específica a otro programa, por ejemplo, un <a href="https://es.wikipedia.org/wiki/Sistema_de_gesti%C3%B3n_de_contenidos" target="_blank">CMS</a> tipo Wordpress o Joomla puede incorporar una casilla de comentarios, pero un plugin puede hacer que esta casilla se conecte con las redes sociales y comentar desde su perfil de Facebook o Twitter. En esta lección sólo veremos cómo añadir plugins a nuestra instalación de Omeka[^omeka.net], si desea profundizar en la manera de desarrollar un complemento lo más recomendable es consultar la documentación <a href="http://omeka.org/codex/Plugin_Writing_Best_Practices#Plugin_Directory_Structure" target="_blank">disponible en la página de Omeka</a>.</p>
<p>Las dos fuentes principales de plugins para Omeka son el repositorio oficial de complementos <a href="https://omeka.org/classic/plugins/">https://omeka.org/classic/plugins/</a> y <a href="https://github.com/topics/omeka-plugin" target="_blank">Github</a>. Ambos listados son dinámicos, por lo que recomendamos visitar periódicamente estos lugares para conocer novedades y actualizaciones.</p>
<p>Para instalar un plugin sólo es necesario descargar el complemento de nuestro interés, descomprimirlo (se encuentran almacenados en archivos *.zip) y copiarlo en el interior de la carpeta <code>plugins</code> [^Escher]. Después ingresamos al panel de control de Omeka y a la administración de plugins (<code>/admin/plugins</code>) donde aparecerá el nombre de cada plugin que hayamos copiado en la carpeta, de manera similar a la siguiente imagen:</p>
<p>{% include figure.html filename=&quot;img_5.1-plugins.png&quot; caption=&quot;Panel de administración de plugins&quot; %}</p>
<p>Para instalar un complemento desde Github necesitamos tener instalado <a href="https://git-scm.com/" target="_blank"><code>Git</code></a> en el ordenador [^github_lecc].
Como ejemplo, instalaremos el plugin &quot;Csv Import+&quot; desarrollado por Daniel Berthereau, el cual es una mejora del complemento oficial <a href="https://omeka.org/classic/plugins/CsvImport" target="_blank">CSV Import</a>. Para ello, iremos al repositorio del plugin que está ubicado en <a href="https://github.com/Daniel-KM/Omeka-plugin-CsvImportPlus" target="_blank">Github</a> y copiamos el enlace para clonarlo. Después, desde la carpeta <code>plugins</code> ejecutamos el comando clonar, <code>git clone</code> y le indicamos la ruta de descarga:</p>
<pre><code class="language-terminal">git clone https://github.com/Daniel-KM/Omeka-plugin-CsvImportPlus.git
</code></pre>
<p>Al terminar de clonar veremos una carpeta con el nombre <code>Omeka-plugin-CsvImportPlus</code>. Para que funcione correctamente debemos cambiar el nombre a <code>CsvImportPlus</code>, tras lo cual será posible ver activado el botón <code>Instalar</code>.</p>
<p>Desde el panel de administración de plugins es posible:</p>
<ul>
<li><strong>Instalar</strong>: Con este botón se ejecuta el script que instala el plugin.</li>
<li><strong>Desinstalar</strong>: Desinstala el plugin y borra la información de configuración del mismo.</li>
<li><strong>Desactivar</strong>: Todos los plugins quedan activos después de instalados, si por alguna razón no van a ser usados en el momento pero no quiere desinstalarlos puede aplicar esta opción y dejar el contenido de configuración y los archivos intactos.</li>
<li><strong>Activar:</strong> Revierte la anterior acción.</li>
<li><strong>Configurar</strong>: Enlaza con la página de configuración del plugin. Algunos complementos necesitan cierta información para poder funcionar, otros pueden ser personalizados para que su funcionamiento o presentación se adapte a los requerimientos de los usuarios.</li>
</ul>
<h3>Solución de problemas</h3>
<p>Cuando se descarga un plugin directamente de Github puede aparecer la advertencia &quot;No es un plugin válido.&quot; En ese caso, asegúrese de que el nombre del directorio no contenga la palabra <code>-master</code> o <code>-plugin</code>. También puede comprobar que el nombre del directorio corresponda con el archivo del plugin que obligatoriamente tiene esta forma: <code>NombreComplementoPlugin.php</code>. Si estas opciones no funcionan lo más probable es que el plugin simplemente no corresponda a la versión o aún se encuentre en desarrollo, en cuyo caso no podrá instalarse.</p>
<p>También puede suceder que un plugin se instale y genere conflictos en la plataforma que generarán un mensaje de error o incluso impedirán que se cargue el sitio. En este caso solamente deberá borrar los archivos del plugin y el sitio regresará a la normalidad.</p>
<h2>Seleccionar los plugins</h2>
<p>Para usar Omeka no es realmente necesario ningún complemento, sin embargo, el crecimiento del repositorio hace necesario incorporar &quot;plugins&quot; que permitan ampliar las capacidades de la plataforma. Una buena práctica consiste en instalar solamente aquellos plugins que realmente utilizaremos y desintalar aquellos que no necesitamos, con ello evitamos conflictos entre complementos y posibles problemas de seguridad por utilizar plugins obsoletos.</p>
<p>La selección de plugins dependerá en buena medida de los objetivos del repositorio, para nuestro caso se requerirán complementos que permitan:</p>
<ol>
<li>Mostrar los documentos y hacerlos legibles a los usuarios, ya sean imágenes, archivos PDF u otros. Por ejemplo, <a href="https://omeka.org/classic/plugins/PdfEmbed" target="_blank">PDF Embed</a> y <a href="https://github.com/Daniel-KM/Omeka-plugin-UniversalViewer" target="_blank">Universal Viewer</a>.</li>
<li>Gestionar los metadatos de cada documento: procedencia, cobertura, fechas, nombres, etc. Por ejemplo <a href="http://omeka.org/codex/Plugins/DublinCoreExtended_2.0" target="_blank">Dublin Core Extended</a> y <a href="https://omeka.org/classic/plugins/HideElements" target="_blank">Hide Elements</a>.</li>
<li>Buscar información: complementos que contribuyan a ampliar las capacidades de las búsquedas de Omeka. Por ejemplo <a href="https://omeka.org/classic/plugins/SearchByMetadata" target="_blank">Search by Metadata</a> y <a href="https://omeka.org/classic/plugins/PdfText" target="_blank">PDF Text</a>.</li>
<li>Interrelacionar elementos y colecciones. Por ejemplo <a href="https://omeka.org/classic/plugins/ItemRelations" target="_blank">Item Relations</a>, <a href="https://omeka.org/classic/plugins/CollectionTree" target="_blank">Collection Tree</a> y <a href="https://omeka.org/classic/plugins/Geolocation" target="_blank">Geolocation</a>, <a href="https://github.com/Daniel-KM/Omeka-plugin-Reference" target="_blank">Reference</a>.</li>
<li>Permitir la transcripción de documentos. <a href="https://omeka.org/classic/plugins/Scripto" target="_blank">Scripto</a> es la opción más recomendada, pero también es posible apoyar el proceso de transcripción con el plugin <a href="https://omeka.org/classic/plugins/Contribution" target="_blank">Contribution</a></li>
<li>Analizar la información disponible. Por ejemplo <a href="https://omeka.org/classic/plugins/Ngram" target="_blank">Ngram</a> y <a href="https://omeka.org/classic/plugins/TextAnalysis" target="_blank">Text Analysis</a>.</li>
<li>Exportar e importar información. Las opciones pueden ser <a href="https://omeka.org/classic/plugins/Export" target="_blank">Export</a>, <a href="https://omeka.org/classic/plugins/CsvExport" target="_blank">CSV Export Format</a>, <a href="https://omeka.org/classic/plugins/OmekaApiImport" target="_blank">Omeka API Import</a>, <a href="https://omeka.org/classic/plugins/CsvImport" target="_blank">CSV Import</a>, <a href="https://omeka.org/classic/plugins/Import" target="_blank">Import</a>, o <a href="https://omeka.org/classic/plugins/ZoteroImport" target="_blank">Zotero Import</a>.</li>
</ol>
<p>Explicar el funcionamiento de cada plugin extendería demasiado este tutorial. La estrategia recomendable consiste en instalar los complementos en la medida que vaya surgiendo la necesidad de cada proyecto.</p>
<h1>Temas o plantillas</h1>
<p>Hasta el momento nos hemos enfocado en la manera de tratar la información desde el plano de la administración del contenido. Los temas o plantillas comprenden los archivos que permiten mostrar de una manera dinámica la información contenida en la base de datos e interpretada con PHP, de tal manera que si se realizan cambios en la interface del sitio no afectan los archivos del lado del servidor. Sin los temas, la información sería presentada en forma de HTML simple, por lo que éstos son necesarios para permitir que la presentación del sitio sea agradable a quiénes la consultan, sea posible presentar de manera correcta los contenidos, y</p>
<p>Instalar un tema en Omeka es muy similar a la instalación de plugins. Los temas oficiales de Omeka están disponibles en <a href="https://omeka.org/classic/themes/" target="_blank">el sitio del proyecto</a>. A diferencia de otras plataformas, Omeka tiene una oferta vbastante limitada; aunque puede ampliarse si se explora <a href="https://github.com/topics/omeka-theme" target="_blank">GitHub</a>. Familiarizarse con los temas puede representar una ventaja para personalizar el sitio y añadir algunas funciones que no vienen incluidas de manera predeterminada.</p>
<h2>Instalar un tema</h2>
<p>Descarga desde la colección de <a href="https://omeka.org/classic/themes/" target="_blank">temas de Omeka</a>, o clona desde GitHub, el tema que quieras instalar en el directorio <code>/themes</code> de la instalación de Omeka. Después de descomprimir el archivo <code>tema.zip</code> ve a la pestaña <code>Apariencia</code> del panel de administración o a la dirección <code>/admin/themes/browse</code>, podrás ver que el tema ya está listo para ser seleccionado. Sólo debes hacer clic en el botón &quot;Hacer uso de esta plantilla&quot; y el sitio cambiará de imagen.</p>
<p>{% include figure.html filename=&quot;img_6.0-apariencia.png&quot; caption=&quot;Directorio de temas&quot; %}
{% include figure.html filename=&quot;img_6.1-apariencia.png&quot; caption=&quot;Panel de administración de temas&quot; %}</p>
<p>Posteriormente, dependiendo del tema escogido, podrás ir al panel de configuración del tema haciendo clic en el botón configurar plantilla. Allí tendrás la opción de personalizar ciertos aspectos del tema como el logotipo, la cabecera y &quot;footer&quot; del sitio, la configuración de la página de inicio y algunas opciones para mostrar los elementos. Otras plantillas más complejas pueden brindar opciones para la presentación de imágenes o para agregar códigos de seguimiento.</p>
<h2>Edición de la plantilla</h2>
<div class="alert alert-warning">Realice una copia de cada archivo que vaya a modificar como forma de revertir rápidamente cualquier error que se presente tras la edición.</div>
<p>En este ejercicio vamos a crear una opción en la plantilla &quot;Berlin&quot; que nos permitirá ordenar los elementos por su fecha de creación. De manera predeterminada, Omeka ordena los elementos por la fecha en que fueron agregados a la plataforma, de tal manera que muestra de las entradas más recientes a las más antiguas. Cuando trabajamos con documentos históricos, por lo general, nos interesa poder ordenar por la fecha del documento, ya sea en orden ascendente o descendente.</p>
<p>Lo primero que podemos hacer será editar la navegación de los elementos para que se muestren por fecha en orden ascendente [^DefaultSort]. Para ello debemos ir al panel de administración, de allí a la ventana &quot;Apariencia&quot; y escoger la pestaña &quot;Navegación&quot;. Retiramos la selección del enlace &quot;elementos&quot; y vamos al final de la página. En el formulario que dice &quot;Agregar un vínculo a la navegación&quot; pondremos como &quot;Etiqueta&quot; el nombre &quot;Elementos&quot; y en la &quot;URL&quot; la ruta <code>/nombre_del_repositorio/items/browse/?sort_field=Dublin+Core%2CDate&amp;sort_dir=a</code>. Hacemos clic en el botón &quot;Añade un enlace&quot; y arrastramos el nuevo vínculo hasta el inicio de la página. Finalmente damos &quot;Guardar&quot; y debe aparecer el mensaje de confirmación &quot;La configuración sobre la navegación ha sido actualizada.&quot;</p>
<p>{% include figure.html filename=&quot;img_7.0-plantilla.png&quot; caption=&quot;Agregar vínculo personalizado&quot; %}
{% include figure.html filename=&quot;img_7.1-plantilla.png&quot; caption=&quot;Personalizar menú de navegación&quot; %}</p>
<p>De esta manera le estamos diciendo a Omeka cada vez que entremos a la página &quot;Navegar por los elementos&quot; (<code>/items/browse</code>) que ordene los elementos por un campo (<code>?sort_field</code>), que en este caso será la categoría &quot;Fecha&quot; (<code>CDate</code>) de Dublin Core (<code>Dublin+Core</code>), y que este orden sea ascendente (<code>&amp;sort_dir=a</code>).</p>
<p>Siguiendo esta lógica podemos hacer otro tipo de ordenación, por ejemplo, por descripción (<code>?sort_field=Dublin+Core%2CDescription</code>), e incluso por categorías que no estén en el Dublin Core sino como tipos de metadatos del elemento, como el texto (<code>?sort_field=Item+Type+Metadata%2CText</code>).</p>
<p>Esta opción, sin embargo, no evitará que en los resultados de búsqueda o en las colecciones se ordenen los elementos por fecha de agregación. Por esta razón una buena estrategia consiste en habilitar la opción general para ordenar por fecha del documento.</p>
<p>Sin importar lo compleja que sea una plantilla de Omeka, la estructura básica de la plantilla exige cumplir con una estructura básica que incluye una carpeta para los archivos de navegación de los elementos llamada <code>items</code>. Dentro de ella, dependiendo de la plantilla, habrá una serie de archivos <code>php</code> y uno de ellos se llama <code>browse.php</code>, responsable por mostrar los ítems en la página &quot;Navegar por los elementos&quot;. Como verás, la ruta se asemeja a la del sitio público que es <code>/items/browse</code>.</p>
<p>Abrimos el archivo <code>browse.php</code> en nuestro editor de código. Si no estás muy familiarizado con <code>php</code> este código parecerá escrito en Klingon. No importa que no sepas <code>php</code> (o Klingon), sólo nos vamos a concentrar en estas pocas líneas de código que se encuentran al inicio del código (aprox. después de la línea 18):</p>
<pre><code class="language-php">&lt;?php
$sortLinks[__('Title')] = 'Dublin Core,Title';
$sortLinks[__('Creator')] = 'Dublin Core,Creator';
$sortLinks[__('Date Added')] = 'added';
?&gt;
&lt;div id=&quot;sort-links&quot;&gt;
    &lt;span class=&quot;sort-label&quot;&gt;&lt;?php echo __('Sort by: '); ?&gt;&lt;/span&gt;&lt;?php echo browse_sort_links($sortLinks); ?&gt;
&lt;/div&gt;
</code></pre>
<p>Para saber dónde empieza y termina cada <em>script</em> de <code>php</code> sólo tienes que fijarte en las etiquetas de apertura <code>&lt;?php</code> y de cierre <code>?&gt;</code>. Todo lo que esté entre esos símbolos constituye un <em>script</em> de <code>php</code>. Las tres opciones que vemos en la esquina derecha del listado de ítems página &quot;Navegar por los elementos&quot; son &quot;impresas&quot; por el <em>script</em> <code>&lt;?php echo browse_sort_links($sortLinks); ?&gt;</code>, que básicamente le dice a <code>php</code> que muestre (<code>echo</code>) un grupo o array según la función <code>browse_sort_links</code> que se encuentra almacenado en la variable <code>$sortLinks</code>.</p>
<p>Para modificar las opciones de ordenación debemos editar la variable <code>$sortLinks</code>, que es la que guarda las opciones de ordenación. Para añadir nuestra opción de ordenar por fecha del documento vamos a crear un enlace que se llame &quot;Fecha del documento&quot; y un valor de ordenación que corresponda a la categoría Fecha del esquema Dublin Core.</p>
<p>En una línea nueva antes del cierre del primer <em>script</em> vamos a escribir el siguiente código: <code>$sortLinks[__('Fecha del documento')] = 'Dublin Core,Date';</code></p>
<p>El código deberá quedar como sigue:</p>
<pre><code class="language-php">&lt;?php
$sortLinks[__('Title')] = 'Dublin Core,Title';
$sortLinks[__('Creator')] = 'Dublin Core,Creator';
$sortLinks[__('Date Added')] = 'added';
$sortLinks[__('Fecha del documento')] = 'Dublin Core,Date';
?&gt;
</code></pre>
<p>Guarda el archivo y carga nuevamente la página de navegación. Si todo salió según el plan, deberá aparecer el enlace con la opción &quot;Fecha del documento&quot;. Haz clic y prueba que la ordenación sea correcta. En caso de no obtener los resultados deseados revisa que los metadatos hayan sido escritos correctamente (comprueba que no hay espacios en blanco antes del texto y que el formato de las fechas sea coherente en todos los elementos).</p>
<p>{% include figure.html filename=&quot;img_7.2-plantilla_fecha.png&quot; caption=&quot;Ordenar por fecha del documento&quot; %}</p>
<p>También podemos hacer que sea posible ver la fecha del documento en la navegación. Para ello, agregaremos unas cuantas líneas al loop que está a continuación de la sección que acabamos de editar. La sección de código que editaremos será la siguiente:</p>
<pre><code class="language-php">&lt;?php foreach (loop('items') as $item): ?&gt;
&lt;div class=&quot;item record&quot;&gt;
    &lt;h2&gt;&lt;?php echo link_to_item(metadata('item', array('Dublin Core', 'Title')), array('class'=&gt;'permalink')); ?&gt;&lt;/h2&gt;
    &lt;div class=&quot;item-meta&quot;&gt;
    &lt;?php if (metadata('item', 'has files')): ?&gt;
    &lt;div class=&quot;item-img&quot;&gt;
        &lt;?php echo link_to_item(item_image()); ?&gt;
    &lt;/div&gt;
    &lt;?php endif; ?&gt;

    &lt;?php if ($description = metadata('item', array('Dublin Core', 'Description'), array('snippet'=&gt;250))): ?&gt;
    &lt;div class=&quot;item-description&quot;&gt;
        &lt;?php echo $description; ?&gt;
    &lt;/div&gt;
    &lt;?php endif; ?&gt;

    &lt;?php if (metadata('item', 'has tags')): ?&gt;
    &lt;div class=&quot;tags&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;?php echo __('Tags'); ?&gt;:&lt;/strong&gt;
        &lt;?php echo tag_string('items'); ?&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;?php endif; ?&gt;

    &lt;?php fire_plugin_hook('public_items_browse_each', array('view' =&gt; $this, 'item' =&gt;$item)); ?&gt;

    &lt;/div&gt;&lt;!-- end class=&quot;item-meta&quot; --&gt;
&lt;/div&gt;&lt;!-- end class=&quot;item hentry&quot; --&gt;
&lt;?php endforeach; ?&gt;
</code></pre>
<p>Después del segundo <code>&lt;?php endif; ?&gt;</code> ingresa el siguiente código:</p>
<pre><code class="language-php">    &lt;!--agrega la fecha a cada elemento --&gt;
    &lt;?php if ($date = metadata('item', array('Dublin Core', 'Date'))): ?&gt;
    &lt;div class=&quot;item-description&quot;&gt;
        &lt;?php echo $date; ?&gt;
    &lt;/div&gt;
	&lt;?php endif; ?&gt;
</code></pre>
<p>Lo único que hacemos consiste en decirle a la plantilla que si el elemento tiene información sobre la fecha en el Dublin Core la inserte dentro de la división que tiene la clase &quot;item-description&quot;.</p>
<p>{% include figure.html filename=&quot;img_7.3-plantilla_fecha_vis.png&quot; caption=&quot;Visualizar la fecha del documento en la navegación&quot; %}</p>
<h3>Edición de la plantilla &quot;default&quot;</h3>
<p>Si tienes instalada la plantilla predeterminada no encontrarás el archivo <code>items\browse</code> en el fichero del tema. Para realizar la edición deberás buscar el archivo <code>\application\views\scripts\items\browse.php</code>. Sigue los pasos indicados anteriormente y tendrás los mismos resultados.</p>
<h1>Editar el <code>Core</code> de Omeka</h1>
<p>En ocasiones será necesario modificar un poco más que la plantilla de Omeka para adaptarla a las necesidades de nuestro proyecto.</p>
<h2>Cambiar entre tipos de elemento y colecciones</h2>
<p>Los tipos de elementos sirven para describir objetos diferenciables, en tanto las colecciones sirven para agrupar elementos sin importar el objeto asociado. Así, una colección denominada &quot;administración de justicia&quot; puede agrupar textos, expedientes judiciales, cartas, fotografías, personas, etc. Si hubiese un tipo de elemento que quisiera agrupar todos los documentos relacionados con la administración de justicia tendría que crear demasiados descriptores como para que fuese funcional.</p>
<p>Por ejemplo, al construir el repositorio de fuentes para mi investigación doctoral, agrupé bajo la categoría &quot;Reales cédulas y órdenes&quot; a este tipo de documentos. El problema es que construí con ello una colección que agrupa una variopinta cantidad de decisiones que afectaban el comercio, la administración de justicia, la policía, la fiscalidad, etc.</p>
<p>Corregir este problema no es sencillo ya que la plataforma no tiene una opción que convierta colecciones en tipos de elemento o viceversa. La opción más simple para solventar este problema consiste en &quot;actualizar&quot; la tabla que relaciona los elementos con sus colecciones y tipos: <code>omeka_items</code>.</p>
<p>Para ello solamente necesitamos los identificadores de la colección y del tipo de elemento. Supongamos que la colección &quot;reales cédulas&quot; está identificada con el número 2 (<code>/admin/collections/show/2</code>) y el tipo de elemento &quot;legislación&quot; con el número 18 (<code>/admin/item-types/show/18</code>). Vamos a asociar todos los elementos de la colección 2 al tipo de elemento 18.</p>
<p>Vamos a <em>phpMyAdmin</em> y desde la base de datos de Omeka entramos a la tabla <code>omeka_items</code>. Al entrar, encontraremos una tabla con ocho columnas, para este ejercicio sólo nos interesan las tres primeras. <code>id</code> es el identificador de cada elemento, <code>item_type_id</code> corresponde al tipo de elemento y <code>collection_id</code> a la colección a la que está asociada dicha entrada. En nuestro ejemplo, el elemento 1 está asociado con el tipo de elemento 1, que corresponde a &quot;texto&quot; y a la colección 2, &quot;reales cédulas&quot;.</p>
<p>{% include figure.html filename=&quot;img_8.1-omeka_items.png&quot; caption=&quot;tabla omeka_items&quot; %}</p>
<p>Ahora, vamos a la pestaña SQL y desde allí ejecutamos lo siguiente:</p>
<pre><code class="language-sql">UPDATE `omeka_items`
SET `item_type_id` = 18
WHERE `collection_id` = 2
</code></pre>
<p>Lo que le estamos diciendo a la consola es que queremos actualizar la columna <code>item_type_id</code> con el valor 18 en la tabla <code>omeka_items</code> en las filas donde el valor de la colección sea igual a 2. Si todo salió correctamente se imprimirá un mensaje indicando cuántas filas fueron afectadas y la tabla se habrá actualizado.</p>
<p>{% include figure.html filename=&quot;img_8.2-omeka_items.png&quot; caption=&quot;resultado edición tabla&quot; %}</p>
<p>Si entendemos la lógica de este <em>script</em> podemos hacer la operación inversa. Digamos que ahora queremos que los elementos agrupados en &quot;legislación&quot; sean incluidos en la colección 3, que hemos denominado &quot;Nueva colección&quot;. Solamente tendremos que modificar el orden de las variables así:</p>
<pre><code class="language-sql">UPDATE `omeka_items`
SET `collection_id` = 3
WHERE `item_type_id` = 18
</code></pre>
<p>La tabla habrá sido modificada, de tal manera que el elemento 1 ahora estará asociado al tipo de elemento 18 y la colección 3.</p>
<p>{% include figure.html filename=&quot;img_8.3-omeka_items.png&quot; caption=&quot;resultado edición tabla&quot; %}</p>
<p>Ten cuidado al actualizar los registros de no olvidar la cláusula <code>WHERE</code>. Si lo olvidas se actualizarán TODOS los registros de esa columna.</p>
<p>En ciertas plataformas diferentes a <em>phpMyAdmin</em> puede requerirse el añadir un punto y coma (;) al final del código. Si marca un error de sintáxis es posible que se deba a eso.</p>
<h2>Editar el &quot;DublinCore&quot;</h2>
<p>Aunque no se recomienda modificar el esquema de metadatos Dublin Core y sea preferible personalizar los tipos de elementos y sus descriptores, es posible que por las necesidades específicas del proyecto se quiera agregar un descriptor al formulario inicial de cada elemento. Para mi caso personal, quise ingresar un campo denominado &quot;capítulo&quot; al formulario principal porque al agrupar la información por colecciones sólo me permitía asociar un elemento a una colección. De esta manera, podía crear un campo donde un elemento pudiera estar asociado a dos o más secciones de mi proyecto doctoral.</p>
<p>El procedimiento en sí es bastante sencillo. En primer lugar, hay que entender cómo se relacionan los elementos y los estándares de metadatos. Como se muestra en la imagen, en la tabla <code>omeka_elements_sets</code> se define el estándar de metadatos, en este caso DublinCore, en tanto <code>omeka_elements</code> incluye cada uno de los elementos del estándar, por ejemplo “título”, “descripción”, “autor”, “contribuidor”, etcétera. Modificar cualquiera de estos elementos creará de inmediato un error al momento de desplegar el formulario para crear un nuevo ítem por lo que la mejor estrategia es crear un nuevo elemento en el estándar de metadatos.</p>
<p>{% include figure.html filename=&quot;img_9.1-omeka_elements_Set.jpg&quot; caption=&quot;relación de los datos del Dublin Core&quot; %}</p>
<p>Para ingresar un nuevo elemento vamos a recurrir nuevamente a SQL y <em>phpMyAdmin</em>, pero esta vez utilizaremos la condición <code>INSERT INTO</code>.</p>
<pre><code class="language-sql">INSERT INTO
  `omeka_elements`(`id`, `element_set_id`,`order`,`name`, `description`,`comment`)
VALUES(NULL,'1',NULL,'Capítulo','El número y tema del capítulo al que le sirve este elemento',NULL);
</code></pre>
<p>De este modo, ya estará disponible la opción &quot;capítulo&quot; en el formulario principal.</p>
<p>{% include figure.html filename=&quot;img_9.2-omeka_opcion-cap.png&quot; caption=&quot;Nueva opción en el formulario principal&quot; %}</p>
<h1>A modo de cierre</h1>
<p>En esta lección nos enfocamos en los requisitos básicos para construir un repositorio de fuentes primarias con Omeka desde una instalación local. Aprendiste a instalar y desinstalar componentes, identificar los archivos del programa, y entender un poco más la base de datos. También habrás tenido una probadita de cómo editar los archivos escritos en PHP y modificar la base de datos con SQL. Además de buenas prácticas para el ingreso de la información para que sea consistente y fácilmente recuperable.
Ahora la labor queda en tus manos, ingresa información y experimenta con la plataforma para que descubras las potencialidades y limitaciones de Omeka.</p>
<h1>Notas</h1>
<p>[^version]: Esta lección se probó en la versión 2.6.1. (02/05/2018). En caso de tener una instalación anterior a Omeka 2.x se recomienda actualizar según las instrucciones del <a href="https://omeka.org/classic/docs/Installation/Upgrading/">manual de usuario</a>.
[^xampp_instrucciones]: Un video que explica la instalación del software puede consultarse en <a href="https://www.youtube.com/watch?v=h6DEDm7C37A">https://www.youtube.com/watch?v=h6DEDm7C37A</a>.
[^advertencia_Ubuntu]: La ventana de gestión de servidores (<em>manage servers</em>) en Linux muestra la opción de activar el servidor <code>ProFTPD</code>. Como Omeka se ejecuta con Apache no es necesario iniciarlo.
[^bitnami_ingreso]: En Bitnami de manera predeterminada el usuario de phpMyAdmin será &quot;root&quot; y la contraseña será la que fue solicitada en la instalación de la máquina virtual.
[^transifex]: Es recomendable que antes de iniciar una tarea de traducción completa de la plataforma se consulte el sitio oficial del proyecto de traducción de omeka en <a href="https://www.transifex.com/omeka/omeka/">Transifex</a>.
[^omeka.net]: Para el servicio de Omeka.net puede consultar la lección <a href="/es/lecciones/poniendo-omeka-a-funcionar#instala-algunos-plugins">poniendo Omeka a funcionar</a>.
[^github_lecc]: En caso de no estar familiarizado con el uso de Git o Github te recomendamos revisar la lección <a href="/es/lecciones/introduccion-control-versiones-github-desktop">Introducción al control de versiones con GitHub Desktop</a> de Daniel van Strien.
[^Escher]: Hasta enero de 2018 era común utilizar el &quot;Escher&quot; como complemento para instalar &quot;plugins&quot; con un sólo clic en Omeka Classic, sin embargo, las modificaciones en el registro y publicación de plugins (además de algunos problemas de la versión 1.0.1)  <a href="https://forum.omeka.org/t/escher-not-working/3044/14">lo eliminaron del listado oficial de Omeka</a>. En el momento su mantenimiento corre a cargo de Daniel Berthereau (<a href="https://github.com/Daniel-KM">Daniel-KM</a> en GitHub) y se puede clonar desde <a href="https://github.com/Daniel-KM/Omeka-plugin-Escher.git">https://github.com/Daniel-KM/Omeka-plugin-Escher.git</a>.
[^DefaultSort]: También es posible modificar el orden predeterminado con el plugin <a href="https://github.com/anuragji/DefaultSort">DefaultSort</a>. Cualquier método que se use no afecta el ejercicio aquí presentado.</p>
<!-- HTML_TAG_END -->

</div>
	</body>
</html>
