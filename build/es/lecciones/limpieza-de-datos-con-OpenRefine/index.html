<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="description" content="" />
		<link rel="icon" href="/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		

		

		<link rel="stylesheet" href="/_app/assets/start-61d1577b.css">
		<link rel="modulepreload" href="/_app/start-c09d08cd.js">
		<link rel="modulepreload" href="/_app/chunks/vendor-9b9d6288.js">
		<link rel="modulepreload" href="/_app/pages/__layout.svelte-de46afb2.js">
		<link rel="modulepreload" href="/_app/pages/_lang_/__layout.svelte-e75718c6.js">
		<link rel="modulepreload" href="/_app/chunks/stores-191d1505.js">
		<link rel="modulepreload" href="/_app/pages/_lang_/_lessons_/_slug_/index.svelte-efe77d76.js">

		<script type="module">
			import { start } from "/_app/start-c09d08cd.js";
			start({
				target: document.querySelector("#svelte"),
				paths: {"base":"","assets":""},
				session: {},
				route: true,
				spa: false,
				trailing_slash: "never",
				hydrate: {
					status: 200,
					error: null,
					nodes: [
						import("/_app/pages/__layout.svelte-de46afb2.js"),
						import("/_app/pages/_lang_/__layout.svelte-e75718c6.js"),
						import("/_app/pages/_lang_/_lessons_/_slug_/index.svelte-efe77d76.js")
					],
					url: new URL("sveltekit://prerender/es/lecciones/limpieza-de-datos-con-OpenRefine"),
					params: {lang:"es",lessons:"lecciones",slug:"limpieza-de-datos-con-OpenRefine"}
				}
			});
		</script><script>
			if ('serviceWorker' in navigator) {
				navigator.serviceWorker.register('/service-worker.js');
			}
		</script>
	</head>
	<body>
		<div id="svelte">


The Programming Historian <a href="/en">English</a> <a href="/es">Spanish</a>
<br>
This is the es edition.

<h1>Limpieza de datos con OpenRefine</h1>

<!-- HTML_TAG_START --><p>{% include toc.html %}</p>
<h2 id="objetivos-de-la-lección">Objetivos de la lección</h2>
<p>No confíes ciegamente en tus datos. Ese es el mensaje clave de este tutorial que se centra en mostrar cómo los investigadores pueden diagnosticar y proceder sobre la exactitud de los datos. En esta lección aprenderás los principios y la práctica de la limpieza de datos,  así como la forma de usar <a href="http://openrefine.org/"><em>OpenRefine</em></a> para realizar cuatro tareas esenciales que te ayudarán a limpiar tus datos:</p>
<ol>
<li>Eliminar registros duplicados</li>
<li>Separar varios valores contenidos en el mismo campo</li>
<li>Analizar la distribución de valores a lo largo de un conjunto de datos</li>
<li>Agrupar diferentes representaciones de la misma realidad</li>
</ol>
<p>Estos pasos se ilustran con la ayuda de una serie de ejercicios basados en una colección de metadatos del <a href="http://www.powerhousemuseum.com/">Museo Powerhouse</a>, que demuestran cómo los métodos (semi-)automatizados pueden ayudarte a corregir los errores que puedan presentar tus datos.</p>
<h2 id="¿por-qué-los-historiadores-deben-preocuparse-por-la-calidad-de-los-datos">¿Por qué los historiadores deben preocuparse por la calidad de los datos?</h2>
<p>Los registros duplicados, los valores vacíos y los formatos inconsistentes son fenómenos para los que debemos estar preparados cuando se usan conjuntos de datos históricos. Esta lección te enseñará a descubrir las inconsistencias en los datos incluidos en una hoja de cálculo o en una base de datos. A medida que incrementamos el compartir, agregar y reutilizar datos en la web, los historiadores tendrán que responder a los problemas de calidad de los datos que inevitablemente aparecerán. Usando un programa llamado <a href="http://openrefine.org" title="OpenRefine"><em>OpenRefine</em></a>, podrás identificar fácilmente errores sistemáticos tales como celdas en blanco, duplicados, inconsistencias de ortografía, etc. <a href="http://openrefine.org" title="OpenRefine"><em>OpenRefine</em></a> no sólo te permite diagnosticar rápidamente la exactitud de tus datos, sino también actuar sobre ciertos errores de forma automatizada.</p>
<h2 id="descripción-de-la-herramienta-openrefine">Descripción de la herramienta: OpenRefine</h2>
<p>Tiempo atrás los historiadores debieron confiar en los especialistas en tecnologías de la información para diagnosticar la calidad de los datos y ejecutar tareas de limpieza. Estas tareas requerían el uso de programas de ordenador personalizados cuando se trabajaba con conjuntos de datos de gran tamaño. Por suerte, el advenimiento de las herramientas de transformación interactiva de datos (<em>Interactive Data Transformation</em> - IDTs) permiten realizar actualmente  operaciones rápidas y económicas sobre grandes cantidades de datos, incluso realizadas por profesionales que carecen de amplias habilidades técnicas.</p>
<p>Las IDTs se asemejan a los programas de hojas de cálculo de escritorio con los que todos estamos familiarizados, con los que comparten algunas funcionalidades. Por ejemplo, puedes utilizar una aplicación como Microsoft Excel para ordenar los datos basándote en filtros numéricos, alfabéticos y desarrollados a medida, lo que te permite detectar errores con mayor facilidad. Configurar estos filtros en una hoja de cálculo puede resultar difícil, ya que son una funcionalidad secundaria. De forma genérica se puede decir que las hojas de cálculo están diseñadas para trabajar en filas y celdas individuales mientras que las IDTs operan en grandes rangos de datos a la vez. Estas “super-hojas de cálculo” ofrecen una interfaz integrada y fácil de usar a través de la cual los usuarios finales pueden detectar y corregir errores.</p>
<p>En los últimos años se han desarrollado varias herramientas de propósito general para la transformación interactiva de datos, tales como <a href="http://control.cs.berkeley.edu/abc/"><em>Potter’s Wheel ABC</em></a> y <a href="http://vis.stanford.edu/papers/wrangler/"><em>Wrangler</em></a> (actualmente <a href="https://www.trifacta.com/products/wrangler/"><em>Trifacta Wrangler</em></a>). Aquí nos centraremos específicamente en <a href="http://openrefine.org/"><em>OpenRefine</em></a> (anteriormente Freebase Gridworks y Google Refine) pues, en opinión de los autores, es la herramienta más fácil de usar para procesar y limpiar eficientemente grandes cantidades de datos en una interfaz basada en navegador.</p>
<p>Además del perfilado de datos y las operaciones de limpieza, las extensiones de <a href="http://openrefine.org" title="OpenRefine"><em>OpenRefine</em></a> permiten a los usuarios identificar conceptos en texto no estructurado, un proceso denominado <a href="https://es.wikipedia.org/wiki/Reconocimiento_de_nombres_de_entidades">reconocimiento de nombres de entidades</a> (<a href="http://en.wikipedia.org/wiki/Named-entity_recognition"><em>named-entity recognition</em></a>, NER, en inglés), pudiendo también cotejar[^1] sus propios datos con bases de conocimiento existentes. Así, <a href="http://openrefine.org" title="OpenRefine"><em>OpenRefine</em></a> puede ser una práctica herramienta para vincular datos con conceptos y autoridades que ya han sido publicadas en la Web por instituciones como la <a href="http://www.loc.gov/index.html"><em>Biblioteca del Congreso de los EEUU</em></a> u <a href="http://www.oclc.org/home.en.html">OCLC</a>. La limpieza de datos es un requisito previo para estos pasos; la tasa de éxito del NER y un proceso de coincidencia fructífera entre tus datos y las autoridades externas depende de tu capacidad para hacer tus datos tan coherentes como sea posible.</p>
<h2 id="descripción-del-ejercicio-powerhouse-museum">Descripción del ejercicio Powerhouse Museum</h2>
<p>El Museo Powerhouse de Sydney ofrece la exportación gratuita de metadatos de su colección en su <a href="http://www.powerhousemuseum.com/collection/database/download.php">sitio web</a>. Este museo es uno de los mayores de ciencia y tecnología de todo el mundo, proporcionando acceso a casi 90.000 objetos, que van desde máquinas de vapor a cristalería fina y desde  alta costura a chips de ordenador.</p>
<p>Este museo ha estado divulgando activamente su colección en línea y haciendo que la mayoría de sus datos estén disponibles libremente. Desde el sitio web del museo, se puede descargar un archivo de texto separado por tabulaciones llamado <em>phm-collection.tsv</em>, que se puede abrir como una hoja de cálculo. El archivo descomprimido (58MB) contiene metadatos básicos (17 campos) para 75.823 objetos, publicados bajo una licencia <a href="https://creativecommons.org/licenses/by-sa/2.5/es/">Creative Commons de Reconocimiento-Compartir-Igual 2.5</a>. En este tutorial usaremos una copia de los datos que hemos archivado para descargarlos (en un momento). Esto asegura que si el Museo Powerhouse actualiza los datos, te seguirá siendo posible el seguir esta Lección.</p>
<p>A través del proceso de perfilado de datos y de limpieza, el estudio de caso se centrará específicamente en el campo <code>Categorías</code>, que se rellena con términos del Tesauro de nombres de objetos del museo Powerhouse (PONT). PONT reconoce el uso y la ortografía de Australia, y refleja de forma muy directa las fortalezas de la colección. En la colección encontrarás las mejores representaciones de la historia social y las artes decorativas y, en comparación, pocos nombres de objetos relacionados con las bellas artes y la historia natural.</p>
<p>Los términos del campo Categorías constituyen lo que llamamos un vocabulario controlado. Un vocabulario controlado consiste en palabras clave que describen el contenido de una colección usando un número limitado de términos, y a menudo es un punto de entrada clave en los conjuntos de datos utilizados por los historiadores en las bibliotecas, archivos y museos. Por esta razón vamos a prestar especial atención al campo &#39;Categorías&#39;. Una vez que se han limpiado los datos, debería ser posible reutilizar los términos del vocabulario controlado para encontrar información adicional sobre ellos en otros sitios en línea, lo que se conoce como creación de <a href="https://es.wikipedia.org/wiki/Datos_enlazados">datos enlazados</a>.</p>
<h3 id="comenzando-instalación-de-openrefine-e-importación-de-datos">Comenzando: instalación de OpenRefine e importación de datos</h3>
<p><a href="http://openrefine.org/#download_openrefine">Descarga <em>OpenRefine</em></a> y sigue las instrucciones de instalación. <a href="http://openrefine.org" title="OpenRefine"><em>OpenRefine</em></a> funciona en todas las plataformas: Windows, Mac y Linux. <a href="http://openrefine.org" title="OpenRefine"><em>OpenRefine</em></a> se abrirá en tu navegador, pero es importante señalar que la aplicación se ejecuta localmente y que tus datos no se almacenarán en línea. Los archivos de datos están disponibles en nuestro <a href="http://data.freeyourmetadata.org/powerhouse-museum/">sitio web FreeYourMetadata</a>, que serán los que se utilizarán a lo largo de este tutorial. Descarga el archivo <em>phm-collection.tsv</em> antes de continuar.</p>
<blockquote>
<p>Nota de la traductora: Open Refine se instala por defecto en inglés. Para usarlo en español sólo necesitas cambiar la configuración del lenguaje. Pulsa <strong>Language settings</strong> y se mostrará en la ventana un desplegable donde podrás escoger el español. Pulsa <strong>Change language</strong> y la página te dirá que necesita refrescarse para aplicar los cambios. Haz clic en <strong>Aceptar</strong> y la página y el resto del programa aparecerán en español.</p>
</blockquote>
<p>En la página de inicio de <em>OpenRefine</em>, crea un nuevo proyecto utilizando el archivo de datos descargado y haz clic en &#39;<strong>Siguiente</strong>&#39;. De forma predeterminada, la primera línea se analizará correctamente como el nombre de una columna, pero es necesario desmarcar la casilla de verificación &#39;Las comillas se usan para agrupar celdas que contienen separadores de columna&#39;, ya que las comillas dentro del archivo no tienen ningún significado para <em>OpenRefine</em>. Ahora haz clic en &#39;<strong>Crear proyecto</strong>&#39;. Si todo va bien, verás 75.814 filas. Como alternativa, puedes descargarte directamente el <a href="http://data.freeyourmetadata.org/powerhouse-museum/phm-collection.google-refine.tar.gz">proyecto inicial de <em>OpenRefine</em></a>.</p>
<p>El conjunto de datos del museo Powerhouse está formado por metadatos detallados de todos los objetos de la colección, incluyendo título, descripción, varias categorías a las que pertenece el objeto, información de procedencia y un vínculo persistente al objeto en el sitio web del museo. Para tener una idea de a qué objeto corresponden los metadatos simplemente haz clic en el vínculo persistente y se abrirá el sitio web.[^2]</p>
<p>{% include figure.html caption=&quot;Figura 1: Captura de pantalla de un Objeto de Muestra del sitio web del Museo Powerhouse&quot; filename=&quot;powerhouseScreenshot.png&quot; %}</p>
<h3 id="conoce-tus-datos">Conoce tus datos</h3>
<p>Lo primero que debes hacer es echar un vistazo general y conocer tus datos. Puedes inspeccionar los diferentes valores de datos mostrándolos en <code>facetas</code>. Se podría considerar una <a href="https://es.wikipedia.org/wiki/B%C3%BAsqueda_por_facetas">faceta</a> como una lente a través de la cual se visualiza un subconjunto específico de los datos, basado en un criterio de su elección. Haz clic en el triángulo situado delante del nombre de la columna, selecciona Facetas y crea una faceta. Por ejemplo, intenta crear una faceta de <code>texto</code> o una faceta <code>numérica</code>, dependiendo de la naturaleza de los valores contenidos en los campos (los valores numéricos se muestran en color verde [^3]). Sin embargo, debes tener en cuenta que las facetas de texto son más útiles en campos con valores redundantes (por ejemplo, Categorías); si al ejecutarse te aparece el error &#39;son muchas para mostrar&#39;, puedes optar por aumentar el límite de recuento de opciones por encima de los 2.000 predeterminados, aunque un límite demasiado alto puede enlentecer la aplicación (5.000 suele ser una opción segura). Las facetas numéricas no tienen esta restricción. Para más opciones, selecciona <strong>Facetas personalizadas</strong>: la faceta por blanco, por ejemplo, resulta útil para saber cuántos valores se rellenaron para cada campo. Las exploraremos más adelante en los siguientes ejercicios.</p>
<h3 id="eliminar-filas-en-blanco">Eliminar filas en blanco</h3>
<p>Una cosa que notarás al crear una faceta numérica [^4] para la columna Record ID (Identificador del registro) es que tres filas están vacías. Puedes encontrarlos deseleccionando la casilla Numérico, dejando sólo valores No-numéricos. En realidad, estos valores no están realmente en blanco sino que contienen un solo carácter de espacio en blanco, que puede verse moviendo el cursor hasta donde debería haber estado y haciendo clic en el botón &#39;<strong>Editar</strong>&#39; que aparece. Para eliminar estas filas, haz clic en el triángulo que se encuentra delante de la primera columna denominada &#39;<strong>Todas</strong>&#39;, selecciona &#39;<strong>Editar filas</strong>&#39; y, a continuación, &#39;<strong>Eliminar todas las filas que encajen</strong>&#39;. Cierra la faceta numérica para ver las restantes 75.811 filas.</p>
<h3 id="eliminar-duplicados">Eliminar duplicados</h3>
<p>Un segundo paso es detectar y eliminar duplicados. Estos pueden ser localizados clasificándolos por un valor único, como el Record ID (en este caso estamos asumiendo que el ID de registro debería ser único para cada entrada). La operación se puede realizar haciendo clic en el triángulo izquierdo de Record ID, luego eligiendo &#39;<strong>Ordenar</strong>&#39; ... y seleccionando la viñeta &#39;<strong>números</strong>&#39;. En <em>OpenRefine</em>, la clasificación es sólo una ayuda visual, a menos que hagas permanente el reordenamiento. Para ello, haz clic en el menú Sort que aparece en la parte superior y selecciona &#39;<strong>Reordenar filas permanentemente</strong>&#39;. Si olvidas hacer esto, obtendrás resultados impredecibles más adelante en este tutorial.</p>
<p>Las filas idénticas son ahora adyacentes entre sí. A continuación, dejaremos en blanco el Record ID de las filas que tienen el mismo ID de registro que la fila superior a ellos, marcándolos como duplicados. Para ello, haz clic en el triángulo del campo Record ID, elije <strong>Editar celdas</strong> &gt; <strong>Vaciar hacia abajo</strong>. El mensaje de estado indica que la operación ha afectado a 84 columnas (si olvidaste reordenar las filas permanentemente, obtendrás sólo 19, si es así, deshaz la operación en la pestaña &#39;Deshacer / Rehacer&#39; y vuelve al párrafo anterior para asegurarte de que las filas se reordenan y no están simplemente ordenadas). Elimina estas filas creando una faceta de &#39;<strong>celdas en blanco</strong>&#39; en la columna Record ID (&#39;<strong>Facetas</strong>&#39; &gt; &#39;<strong>Facetas personalizadas</strong>&#39; &gt; &#39;<strong>Faceta por blanco</strong>&#39;), seleccionando las 84 líneas en blanco haciendo clic en &#39;<strong>true</strong>&#39; y quitándolas usando el triángulo &#39;<strong>Todos</strong>&#39; (&#39;<strong>Editar filas</strong>&#39; &gt; &#39;<strong>Eliminar todas las filas que encajen</strong>&#39;). Al cerrar la faceta, verás 75.727 filas únicas.</p>
<p>Ten en cuenta que se necesita especial precaución al eliminar duplicados. En el paso antes mencionado, suponemos que el conjunto de datos tiene un campo con valores únicos, lo que indica que la fila entera representa un duplicado. Esto no tiene porqué ser necesariamente el caso, por lo que se debe adoptar gran precaución para verificar manualmente si la fila entera representa o no un duplicado.</p>
<h3 id="separar">Separar</h3>
<p>Una vez eliminados los registros duplicados, podemos observar más de cerca el campo <em>Categorías</em>. En promedio, a cada objeto se le han atribuido 2,25 categorías. Estas categorías están contenidas dentro del mismo campo, separadas por barras verticales, el carácter &#39;<code>|</code>&#39;. El registro 9, por ejemplo, contiene tres: <code>Mineral samples|Specimens|Mineral Samples-Geological</code>. Para analizar en detalle el uso de las palabras clave, los valores del campo Categorías deben separarse en celdas individuales ayudándonos con la barra vertical, expandiendo los 75.727 registros en 170.167 filas. Seleccione &#39;<strong>Editar celdas</strong>&#39;, &#39;<strong>Dividir celdas multi-valuadas</strong>&#39;, introduciendo &#39;<strong><code>|</code></strong>&#39; como el carácter separador de valores. <em>OpenRefine</em> te informa que tiene ahora 170.167 filas.</p>
<p>Es importante entender bien el paradigma filas/registros. Haz que la columna Record ID sea visible para ver qué está pasando. Puedes cambiar entre las vistas &#39;filas&#39; y &#39;registros&#39; haciendo clic en los enlaces con ese nombre que están justo encima de los encabezados de las columnas. En la &#39;vista de filas&#39;, cada fila representa un Record ID y una sola categoría emparejados, permitiendo la manipulación de cada uno individualmente. La &#39;vista de registros&#39; tiene una entrada para cada Record ID, que puede tener diferentes categorías en filas diferentes (agrupadas en gris o blanco), pero cada registro se manipula como un todo. Concretamente, ahora hay 170.167 asignaciones de categoría (filas), distribuidas en 75.736 items de la colección (registros). Quizás notaste que hay 9 registros más que los 75.727 originales, pero no te preocupes por esto de momento, regresaremos a esta pequeña diferencia más tarde.</p>
<h3 id="hacer-facetas-y-agrupar">Hacer facetas y agrupar</h3>
<p>Una vez que el contenido de un campo ha sido separado correctamente, pueden aplicarse los filtros, las facetas y los clústeres para dar una visión general rápida y sencilla de los clásicos problemas con metadatos. Mediante la aplicación de la faceta personalizada &#39;<code>faceta por blanco</code>&#39;, se pueden identificar inmediatamente los 461 registros que no tienen una categoría, lo que representa el 0,6% de la colección. La aplicación de una faceta de texto al campo Categorías permite obtener una visión general de las 4.934 categorías diferentes utilizadas en la colección (el límite predeterminado es de 2.000, puedes hacer clic en &#39;<strong>Establecer límite de recuento de opciones</strong>&#39; para aumentarlo a 5.000). Los encabezados pueden ordenarse alfabéticamente o por frecuencia (&#39;conteo&#39;), dando una lista de los términos más utilizados para indexar la colección. Los tres títulos principales son &#39;Numismatics&#39; (8.041), &#39;Ceramics&#39; (7.390) y &#39;Clothing and dress&#39; (7.279).</p>
<p>Tras la aplicación de una faceta, <em>OpenRefine</em> propone agrupar facetas que han sido elegidas para ser agrupadas basándose en  varios métodos de similitud. Como muestra la Figura 2, el agrupamiento te permite resolver problemas relacionados con inconsistencias de casos, uso incoherente de la forma singular o plural y errores ortográficos sencillos. <em>OpenRefine</em> presenta los valores relacionados y propone fusionarlos en el valor más frecuente. Selecciona los valores que desees agrupar seleccionando individualmente sus casillas o haciendo clic en &#39;<strong>Seleccionar todos</strong>&#39; en la parte inferior, luego selecciona &#39;<strong>Unir seleccionados y reagrupar</strong>&#39;.</p>
<p>{% include figure.html caption=&quot;Figura 2: Visión general de algunas agrupaciones&quot; filename=&quot;visionAgrupaciones.png&quot; %}</p>
<p>El método de agrupación por defecto no es demasiado complejo, por eso no encuentra aún todos los grupos. Experimenta con diferentes métodos para ver qué resultados obtienen. No obstante, ten cuidado: algunos métodos son demasiado agresivos, de forma que podrías terminar agrupando valores que no están relacionados. Ahora que los valores han sido agrupados individualmente, podemos volverlos a unir en una sola celda. Haz clic en el triángulo Categorías y elije <strong>Editar celdas</strong>, <strong>Unir celdas multi-valuadas</strong>, <strong>Aceptar</strong>. Elije el carácter barra vertical (<code>|</code>) como separador. Las filas ahora se ven como antes, con un campo de Categorías de valor múltiple.</p>
<h3 id="aplicación-de-transformaciones-ad-hoc-mediante-el-uso-de-expresiones-regulares">Aplicación de transformaciones <em>ad hoc</em> mediante el uso de expresiones regulares</h3>
<p>Como recordarás se produjo un aumento en el número de registros tras el proceso de separación: nueve registros aparecieron de la nada. Para encontrar la causa de esta disparidad, necesitamos retroceder en el tiempo hasta antes de que separáramos las categorías en filas diferentes. Para ello, activa la ficha Deshacer/Rehacer a la derecha de la ficha Facetas/Filtros y obtendrás un historial de todas las acciones que realizaste desde la creación del proyecto. Selecciona el paso justo antes de &#39;Split multi-valued cells in column Categories&#39;[^5] (Dividir celdas multi-valuadas en la columna categorías) (si has seguido nuestro ejemplo este debería ser &#39;Remove 84 rows&#39; (Eliminar 84 filas)) y luego vuelve a la ficha Facetas/Filtros.</p>
<p>La cuestión surgió durante la operación de división con el carácter barra vertical, por lo que hay una gran probabilidad de que todo lo que salió mal esté vinculado a este carácter. Apliquemos un filtro en la columna Categorías seleccionando &#39;<strong>Filtro de texto</strong>&#39; en el menú. Primero escribe un solo <code>|</code> en el campo de la izquierda: <em>OpenRefine</em> te informa que hay 71.064 registros coincidentes (es decir, registros que contienen una barra vertical) de un total de 75.727. Las celdas que no contienen una barra vertical pueden estar en blanco, pero también pueden ser celdas que contienen una sola categoría sin separador, como el registro 29 que sólo tiene &#39;Scientific instruments&#39;.</p>
<p>Ahora ingresa una segunda <code>|</code> después de la primera para obtener `||`` (doble barra vertical): podrás ver que 9 registros coinciden con este patrón. Estos son probablemente los 9 registros culpables de nuestra discrepancia: cuando <em>OpenRefine</em> los divide la doble barra vertical se interpreta como una ruptura entre dos registros en lugar de un separador doble sin sentido. Y ahora, ¿cómo corregimos estos valores? Ve al menú del campo &#39;Categorías&#39; y elije &#39;<strong>Editar celdas</strong>&#39; &gt; &#39;<strong>Transformar...</strong>&#39;. Bienvenido a la interfaz de transformación de texto personalizado, una potente funcionalidad de <em>OpenRefine</em> que usa el Lenguaje de Expresión <em>OpenRefine</em> (GREL).</p>
<p>La palabra &#39;valor&#39; en el campo de texto representa el valor actual de cada celda, que puedes ver a continuación. Podemos modificar este valor aplicándole funciones (véase la <a href="https://github.com/OpenRefine/OpenRefine/wiki/GREL-Functions">documentación de GREL</a> para una lista completa). En este caso, queremos reemplazar las barras verticales dobles por una sola. Esto puede lograrse introduciendo la siguiente <a href="https://es.wikipedia.org/wiki/Expresi%C3%B3n_regular">expresión regular</a> (asegúrate de no olvidar las comillas):</p>
<pre><code>value.replace(&#39;||&#39;,&#39;|&#39;)
</code></pre>
<p>Bajo el campo de texto &#39;Expression&#39;, obtienes una vista previa de los valores modificados, con las barras verticales dobles eliminadas. Haz clic en <strong>Aceptar</strong> y vuelve a intentar dividir las categorías con &#39;<strong>Editar celdas</strong>&#39; &gt; &#39;<strong>Dividir celdas multi-valuadas...</strong>&#39;, el número de registros se mantendrá ahora en 75.727 (haz clic en el vínculo &#39;<strong>registros</strong>&#39; para realizar una doble comprobación).</p>
<p>* * *<br>Otro problema que se puede resolver con la ayuda de GREL es el problema de los registros para los que la misma categoría se enumera dos veces. Tomemos el registro 41, por ejemplo, cuyas categorías son &#39;Models|Botanical specimens|Botanical Specimens|Didactic Displays|Models&#39;. La categoría &#39;Models&#39; aparece dos veces sin ningún motivo, por lo que queremos eliminar este duplicado. Haz clic en el triángulo del campo Categorías y elije Editar celdas, Unir celdas multi-valuadas, Aceptar. Elije el carácter barra vertical como separador. Ahora las categorías se listan como anteriormente. Luego selecciona &#39;<strong>Editar celdas</strong>&#39; &gt; &#39;<strong>Transformar</strong>&#39;, también en la columna de categorías. Utilizando GREL podemos dividir sucesivamente las categorías mediante el carácter barra vertical, buscar categorías únicas y unirlas de nuevo. Para hacerlo, simplemente escribe la siguiente expresión:</p>
<pre><code>value.split(&#39;|&#39;).uniques().join(&#39;|&#39;)
</code></pre>
<p>Notarás que 32.599 celdas están afectadas, más de la mitad de la colección.</p>
<h3 id="exportación-de-tus-datos-limpios">Exportación de tus datos limpios</h3>
<p>Desde que cargaste tus datos por primera vez en <em>OpenRefine</em>, todas las operaciones de limpieza se han realizado en la memoria del programa, dejando intacto el conjunto original de datos. Si deseas guardar los datos que has estado limpiando debes exportarlos haciendo clic en el menú &#39;<strong>Exportar</strong>&#39; en la parte superior derecha de la pantalla. <em>OpenRefine</em> soporta una gran variedad de formatos, como <a href="https://es.wikipedia.org/wiki/Valores_separados_por_comas">CSV</a>, HTML o Excel: selecciona lo que mejor te convenga o añade tu propia plantilla de exportación haciendo clic en &#39;Plantilla&#39;. También puedes exportar tu proyecto en el formato interno de <em>OpenRefine</em> para compartirlo con otras personas.</p>
<h3 id="construir-sobre-tus-datos-limpios">Construir sobre tus datos limpios</h3>
<p>Una vez que tus datos han sido limpiados, puedes dar el siguiente paso y explorar otras características interesantes de <em>OpenRefine</em>. La comunidad de usuarios de <em>OpenRefine</em> ha desarrollado dos extensiones particularmente interesantes que te permiten vincular tus datos a datos que ya se han publicado en la Web. La <a href="http://web.archive.org/web/20180113121435/http://refine.deri.ie/docs">extensión RDF Refine</a> transforma las palabras clave de texto sin formato en URLs. La <a href="https://github.com/RubenVerborgh/Refine-NER-Extension">extensión NER</a> te permite aplicar el reconocimiento de nombres de entidades (NER), que identifica palabras clave en el texto de los campos textuales y les inserta una URL.</p>
<h2 id="conclusiones">Conclusiones</h2>
<p>Si sólo recordaras una cosa de esta lección, debería ser lo siguiente: <em>todos los datos están sucios, pero tú puedes hacer algo para remediarlo</em>. Como te hemos mostrado, hay ya bastantes cosas que puedes hacer tú mismo para aumentar significativamente la calidad de los datos. En primer lugar, has aprendido cómo puedes obtener una panorámica rápida de cuántos valores vacíos contiene tu conjunto de datos y con qué frecuencia se utiliza un valor determinado (por ejemplo, una palabra clave) en toda una colección. Estas lecciones también han demostrado cómo resolver problemas recurrentes tales como duplicados e inconsistencias ortográficas de forma automatizada con la ayuda de OpenRefine. No dudes en experimentar con las funciones de limpieza, ya que estás realizando estos pasos en una copia de tu conjunto de datos, y <em>OpenRefine</em> te permite rastrear todos tus pasos (y volver atrás) en el caso de que hayas cometido un error.</p>
<h2 id="notas-de-la-traductora">Notas de la traductora</h2>
<p>[^1]: Denominado también conciliar o reconciliar.
[^2]: La página del Museo Powerhouse ha sido modificada desde la publicación original de esta lección en 2013. La página actual que muestra la información de este mismo objeto de la imagen es <a href="https://collection.maas.museum/object/11848">https://collection.maas.museum/object/11848</a>
[^3]: Es posible que al cargar este proyecto no veas ninguna columna con este color. Esto significa que ningún campo tiene definidos sus valores como numéricos.
[^4]: Al cargar el proyecto es muy posible que esta columna aparezca con formato de texto. Para poder aplicar una faceta numérica primero hay que convertirla a formato numérico: &#39;<strong>Editar celdas</strong>&#39; &gt; &#39;<strong>Transformaciones comunes</strong>&#39; &gt; &#39;<strong>a número</strong>&#39;.
[^5]: Esta parte de la interfaz del programa no aparece traducida.</p>
<!-- HTML_TAG_END -->

<script type="application/json" data-type="svelte-data" data-url="limpieza-de-datos-con-OpenRefine/raw.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"metadata\":{\"title\":\"Limpieza de datos con OpenRefine\",\"authors\":[\"Seth van Hooland\",\"Ruben Verborgh\",\"Max De Wilde\"],\"date\":\"2013-08-05T00:00:00.000Z\",\"translation_date\":\"2017-05-17T00:00:00.000Z\",\"reviewers\":[\"Patrick Burns\",\"Nora McGregor\"],\"editors\":[\"Adam Crymble\"],\"translator\":[\"María-Jesús Colmenero-Ruiz\"],\"translation-editor\":[\"Antonio Rojas Castro\"],\"translation-reviewer\":[\"Antonio Rojas Castro\",\"Luisina Silva\"],\"review-ticket\":\"https:\u002F\u002Fgithub.com\u002Fprogramminghistorian\u002Fph-submissions\u002Fissues\u002F73\",\"layout\":\"lesson\",\"original\":\"cleaning-data-with-openrefine\",\"difficulty\":2,\"activity\":\"transforming\",\"topics\":[\"data-manipulation\"],\"abstract\":\"Este tutorial se enfoca en cómo los académicos pueden diagnosticar y tomar acciones para asegurar la precisión de sus datos.\",\"avatar_alt\":\"Dibujo de tareas de labandería en un río que apenas lleva agua\",\"doi\":\"10.46430\u002Fphes0017\"},\"html_body\":\"\u003Cp\u003E{% include toc.html %}\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"objetivos-de-la-lección\\\"\u003EObjetivos de la lección\u003C\u002Fh2\u003E\\n\u003Cp\u003ENo confíes ciegamente en tus datos. Ese es el mensaje clave de este tutorial que se centra en mostrar cómo los investigadores pueden diagnosticar y proceder sobre la exactitud de los datos. En esta lección aprenderás los principios y la práctica de la limpieza de datos,  así como la forma de usar \u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\u002F\\\"\u003E\u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E para realizar cuatro tareas esenciales que te ayudarán a limpiar tus datos:\u003C\u002Fp\u003E\\n\u003Col\u003E\\n\u003Cli\u003EEliminar registros duplicados\u003C\u002Fli\u003E\\n\u003Cli\u003ESeparar varios valores contenidos en el mismo campo\u003C\u002Fli\u003E\\n\u003Cli\u003EAnalizar la distribución de valores a lo largo de un conjunto de datos\u003C\u002Fli\u003E\\n\u003Cli\u003EAgrupar diferentes representaciones de la misma realidad\u003C\u002Fli\u003E\\n\u003C\u002Fol\u003E\\n\u003Cp\u003EEstos pasos se ilustran con la ayuda de una serie de ejercicios basados en una colección de metadatos del \u003Ca href=\\\"http:\u002F\u002Fwww.powerhousemuseum.com\u002F\\\"\u003EMuseo Powerhouse\u003C\u002Fa\u003E, que demuestran cómo los métodos (semi-)automatizados pueden ayudarte a corregir los errores que puedan presentar tus datos.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"¿por-qué-los-historiadores-deben-preocuparse-por-la-calidad-de-los-datos\\\"\u003E¿Por qué los historiadores deben preocuparse por la calidad de los datos?\u003C\u002Fh2\u003E\\n\u003Cp\u003ELos registros duplicados, los valores vacíos y los formatos inconsistentes son fenómenos para los que debemos estar preparados cuando se usan conjuntos de datos históricos. Esta lección te enseñará a descubrir las inconsistencias en los datos incluidos en una hoja de cálculo o en una base de datos. A medida que incrementamos el compartir, agregar y reutilizar datos en la web, los historiadores tendrán que responder a los problemas de calidad de los datos que inevitablemente aparecerán. Usando un programa llamado \u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\\\" title=\\\"OpenRefine\\\"\u003E\u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E, podrás identificar fácilmente errores sistemáticos tales como celdas en blanco, duplicados, inconsistencias de ortografía, etc. \u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\\\" title=\\\"OpenRefine\\\"\u003E\u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E no sólo te permite diagnosticar rápidamente la exactitud de tus datos, sino también actuar sobre ciertos errores de forma automatizada.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"descripción-de-la-herramienta-openrefine\\\"\u003EDescripción de la herramienta: OpenRefine\u003C\u002Fh2\u003E\\n\u003Cp\u003ETiempo atrás los historiadores debieron confiar en los especialistas en tecnologías de la información para diagnosticar la calidad de los datos y ejecutar tareas de limpieza. Estas tareas requerían el uso de programas de ordenador personalizados cuando se trabajaba con conjuntos de datos de gran tamaño. Por suerte, el advenimiento de las herramientas de transformación interactiva de datos (\u003Cem\u003EInteractive Data Transformation\u003C\u002Fem\u003E - IDTs) permiten realizar actualmente  operaciones rápidas y económicas sobre grandes cantidades de datos, incluso realizadas por profesionales que carecen de amplias habilidades técnicas.\u003C\u002Fp\u003E\\n\u003Cp\u003ELas IDTs se asemejan a los programas de hojas de cálculo de escritorio con los que todos estamos familiarizados, con los que comparten algunas funcionalidades. Por ejemplo, puedes utilizar una aplicación como Microsoft Excel para ordenar los datos basándote en filtros numéricos, alfabéticos y desarrollados a medida, lo que te permite detectar errores con mayor facilidad. Configurar estos filtros en una hoja de cálculo puede resultar difícil, ya que son una funcionalidad secundaria. De forma genérica se puede decir que las hojas de cálculo están diseñadas para trabajar en filas y celdas individuales mientras que las IDTs operan en grandes rangos de datos a la vez. Estas “super-hojas de cálculo” ofrecen una interfaz integrada y fácil de usar a través de la cual los usuarios finales pueden detectar y corregir errores.\u003C\u002Fp\u003E\\n\u003Cp\u003EEn los últimos años se han desarrollado varias herramientas de propósito general para la transformación interactiva de datos, tales como \u003Ca href=\\\"http:\u002F\u002Fcontrol.cs.berkeley.edu\u002Fabc\u002F\\\"\u003E\u003Cem\u003EPotter’s Wheel ABC\u003C\u002Fem\u003E\u003C\u002Fa\u003E y \u003Ca href=\\\"http:\u002F\u002Fvis.stanford.edu\u002Fpapers\u002Fwrangler\u002F\\\"\u003E\u003Cem\u003EWrangler\u003C\u002Fem\u003E\u003C\u002Fa\u003E (actualmente \u003Ca href=\\\"https:\u002F\u002Fwww.trifacta.com\u002Fproducts\u002Fwrangler\u002F\\\"\u003E\u003Cem\u003ETrifacta Wrangler\u003C\u002Fem\u003E\u003C\u002Fa\u003E). Aquí nos centraremos específicamente en \u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\u002F\\\"\u003E\u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E (anteriormente Freebase Gridworks y Google Refine) pues, en opinión de los autores, es la herramienta más fácil de usar para procesar y limpiar eficientemente grandes cantidades de datos en una interfaz basada en navegador.\u003C\u002Fp\u003E\\n\u003Cp\u003EAdemás del perfilado de datos y las operaciones de limpieza, las extensiones de \u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\\\" title=\\\"OpenRefine\\\"\u003E\u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E permiten a los usuarios identificar conceptos en texto no estructurado, un proceso denominado \u003Ca href=\\\"https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FReconocimiento_de_nombres_de_entidades\\\"\u003Ereconocimiento de nombres de entidades\u003C\u002Fa\u003E (\u003Ca href=\\\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FNamed-entity_recognition\\\"\u003E\u003Cem\u003Enamed-entity recognition\u003C\u002Fem\u003E\u003C\u002Fa\u003E, NER, en inglés), pudiendo también cotejar[^1] sus propios datos con bases de conocimiento existentes. Así, \u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\\\" title=\\\"OpenRefine\\\"\u003E\u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E puede ser una práctica herramienta para vincular datos con conceptos y autoridades que ya han sido publicadas en la Web por instituciones como la \u003Ca href=\\\"http:\u002F\u002Fwww.loc.gov\u002Findex.html\\\"\u003E\u003Cem\u003EBiblioteca del Congreso de los EEUU\u003C\u002Fem\u003E\u003C\u002Fa\u003E u \u003Ca href=\\\"http:\u002F\u002Fwww.oclc.org\u002Fhome.en.html\\\"\u003EOCLC\u003C\u002Fa\u003E. La limpieza de datos es un requisito previo para estos pasos; la tasa de éxito del NER y un proceso de coincidencia fructífera entre tus datos y las autoridades externas depende de tu capacidad para hacer tus datos tan coherentes como sea posible.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"descripción-del-ejercicio-powerhouse-museum\\\"\u003EDescripción del ejercicio Powerhouse Museum\u003C\u002Fh2\u003E\\n\u003Cp\u003EEl Museo Powerhouse de Sydney ofrece la exportación gratuita de metadatos de su colección en su \u003Ca href=\\\"http:\u002F\u002Fwww.powerhousemuseum.com\u002Fcollection\u002Fdatabase\u002Fdownload.php\\\"\u003Esitio web\u003C\u002Fa\u003E. Este museo es uno de los mayores de ciencia y tecnología de todo el mundo, proporcionando acceso a casi 90.000 objetos, que van desde máquinas de vapor a cristalería fina y desde  alta costura a chips de ordenador.\u003C\u002Fp\u003E\\n\u003Cp\u003EEste museo ha estado divulgando activamente su colección en línea y haciendo que la mayoría de sus datos estén disponibles libremente. Desde el sitio web del museo, se puede descargar un archivo de texto separado por tabulaciones llamado \u003Cem\u003Ephm-collection.tsv\u003C\u002Fem\u003E, que se puede abrir como una hoja de cálculo. El archivo descomprimido (58MB) contiene metadatos básicos (17 campos) para 75.823 objetos, publicados bajo una licencia \u003Ca href=\\\"https:\u002F\u002Fcreativecommons.org\u002Flicenses\u002Fby-sa\u002F2.5\u002Fes\u002F\\\"\u003ECreative Commons de Reconocimiento-Compartir-Igual 2.5\u003C\u002Fa\u003E. En este tutorial usaremos una copia de los datos que hemos archivado para descargarlos (en un momento). Esto asegura que si el Museo Powerhouse actualiza los datos, te seguirá siendo posible el seguir esta Lección.\u003C\u002Fp\u003E\\n\u003Cp\u003EA través del proceso de perfilado de datos y de limpieza, el estudio de caso se centrará específicamente en el campo \u003Ccode\u003ECategorías\u003C\u002Fcode\u003E, que se rellena con términos del Tesauro de nombres de objetos del museo Powerhouse (PONT). PONT reconoce el uso y la ortografía de Australia, y refleja de forma muy directa las fortalezas de la colección. En la colección encontrarás las mejores representaciones de la historia social y las artes decorativas y, en comparación, pocos nombres de objetos relacionados con las bellas artes y la historia natural.\u003C\u002Fp\u003E\\n\u003Cp\u003ELos términos del campo Categorías constituyen lo que llamamos un vocabulario controlado. Un vocabulario controlado consiste en palabras clave que describen el contenido de una colección usando un número limitado de términos, y a menudo es un punto de entrada clave en los conjuntos de datos utilizados por los historiadores en las bibliotecas, archivos y museos. Por esta razón vamos a prestar especial atención al campo &#39;Categorías&#39;. Una vez que se han limpiado los datos, debería ser posible reutilizar los términos del vocabulario controlado para encontrar información adicional sobre ellos en otros sitios en línea, lo que se conoce como creación de \u003Ca href=\\\"https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FDatos_enlazados\\\"\u003Edatos enlazados\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"comenzando-instalación-de-openrefine-e-importación-de-datos\\\"\u003EComenzando: instalación de OpenRefine e importación de datos\u003C\u002Fh3\u003E\\n\u003Cp\u003E\u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\u002F#download_openrefine\\\"\u003EDescarga \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E y sigue las instrucciones de instalación. \u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\\\" title=\\\"OpenRefine\\\"\u003E\u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E funciona en todas las plataformas: Windows, Mac y Linux. \u003Ca href=\\\"http:\u002F\u002Fopenrefine.org\\\" title=\\\"OpenRefine\\\"\u003E\u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E se abrirá en tu navegador, pero es importante señalar que la aplicación se ejecuta localmente y que tus datos no se almacenarán en línea. Los archivos de datos están disponibles en nuestro \u003Ca href=\\\"http:\u002F\u002Fdata.freeyourmetadata.org\u002Fpowerhouse-museum\u002F\\\"\u003Esitio web FreeYourMetadata\u003C\u002Fa\u003E, que serán los que se utilizarán a lo largo de este tutorial. Descarga el archivo \u003Cem\u003Ephm-collection.tsv\u003C\u002Fem\u003E antes de continuar.\u003C\u002Fp\u003E\\n\u003Cblockquote\u003E\\n\u003Cp\u003ENota de la traductora: Open Refine se instala por defecto en inglés. Para usarlo en español sólo necesitas cambiar la configuración del lenguaje. Pulsa \u003Cstrong\u003ELanguage settings\u003C\u002Fstrong\u003E y se mostrará en la ventana un desplegable donde podrás escoger el español. Pulsa \u003Cstrong\u003EChange language\u003C\u002Fstrong\u003E y la página te dirá que necesita refrescarse para aplicar los cambios. Haz clic en \u003Cstrong\u003EAceptar\u003C\u002Fstrong\u003E y la página y el resto del programa aparecerán en español.\u003C\u002Fp\u003E\\n\u003C\u002Fblockquote\u003E\\n\u003Cp\u003EEn la página de inicio de \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E, crea un nuevo proyecto utilizando el archivo de datos descargado y haz clic en &#39;\u003Cstrong\u003ESiguiente\u003C\u002Fstrong\u003E&#39;. De forma predeterminada, la primera línea se analizará correctamente como el nombre de una columna, pero es necesario desmarcar la casilla de verificación &#39;Las comillas se usan para agrupar celdas que contienen separadores de columna&#39;, ya que las comillas dentro del archivo no tienen ningún significado para \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E. Ahora haz clic en &#39;\u003Cstrong\u003ECrear proyecto\u003C\u002Fstrong\u003E&#39;. Si todo va bien, verás 75.814 filas. Como alternativa, puedes descargarte directamente el \u003Ca href=\\\"http:\u002F\u002Fdata.freeyourmetadata.org\u002Fpowerhouse-museum\u002Fphm-collection.google-refine.tar.gz\\\"\u003Eproyecto inicial de \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\\n\u003Cp\u003EEl conjunto de datos del museo Powerhouse está formado por metadatos detallados de todos los objetos de la colección, incluyendo título, descripción, varias categorías a las que pertenece el objeto, información de procedencia y un vínculo persistente al objeto en el sitio web del museo. Para tener una idea de a qué objeto corresponden los metadatos simplemente haz clic en el vínculo persistente y se abrirá el sitio web.[^2]\u003C\u002Fp\u003E\\n\u003Cp\u003E{% include figure.html caption=&quot;Figura 1: Captura de pantalla de un Objeto de Muestra del sitio web del Museo Powerhouse&quot; filename=&quot;powerhouseScreenshot.png&quot; %}\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"conoce-tus-datos\\\"\u003EConoce tus datos\u003C\u002Fh3\u003E\\n\u003Cp\u003ELo primero que debes hacer es echar un vistazo general y conocer tus datos. Puedes inspeccionar los diferentes valores de datos mostrándolos en \u003Ccode\u003Efacetas\u003C\u002Fcode\u003E. Se podría considerar una \u003Ca href=\\\"https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FB%C3%BAsqueda_por_facetas\\\"\u003Efaceta\u003C\u002Fa\u003E como una lente a través de la cual se visualiza un subconjunto específico de los datos, basado en un criterio de su elección. Haz clic en el triángulo situado delante del nombre de la columna, selecciona Facetas y crea una faceta. Por ejemplo, intenta crear una faceta de \u003Ccode\u003Etexto\u003C\u002Fcode\u003E o una faceta \u003Ccode\u003Enumérica\u003C\u002Fcode\u003E, dependiendo de la naturaleza de los valores contenidos en los campos (los valores numéricos se muestran en color verde [^3]). Sin embargo, debes tener en cuenta que las facetas de texto son más útiles en campos con valores redundantes (por ejemplo, Categorías); si al ejecutarse te aparece el error &#39;son muchas para mostrar&#39;, puedes optar por aumentar el límite de recuento de opciones por encima de los 2.000 predeterminados, aunque un límite demasiado alto puede enlentecer la aplicación (5.000 suele ser una opción segura). Las facetas numéricas no tienen esta restricción. Para más opciones, selecciona \u003Cstrong\u003EFacetas personalizadas\u003C\u002Fstrong\u003E: la faceta por blanco, por ejemplo, resulta útil para saber cuántos valores se rellenaron para cada campo. Las exploraremos más adelante en los siguientes ejercicios.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"eliminar-filas-en-blanco\\\"\u003EEliminar filas en blanco\u003C\u002Fh3\u003E\\n\u003Cp\u003EUna cosa que notarás al crear una faceta numérica [^4] para la columna Record ID (Identificador del registro) es que tres filas están vacías. Puedes encontrarlos deseleccionando la casilla Numérico, dejando sólo valores No-numéricos. En realidad, estos valores no están realmente en blanco sino que contienen un solo carácter de espacio en blanco, que puede verse moviendo el cursor hasta donde debería haber estado y haciendo clic en el botón &#39;\u003Cstrong\u003EEditar\u003C\u002Fstrong\u003E&#39; que aparece. Para eliminar estas filas, haz clic en el triángulo que se encuentra delante de la primera columna denominada &#39;\u003Cstrong\u003ETodas\u003C\u002Fstrong\u003E&#39;, selecciona &#39;\u003Cstrong\u003EEditar filas\u003C\u002Fstrong\u003E&#39; y, a continuación, &#39;\u003Cstrong\u003EEliminar todas las filas que encajen\u003C\u002Fstrong\u003E&#39;. Cierra la faceta numérica para ver las restantes 75.811 filas.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"eliminar-duplicados\\\"\u003EEliminar duplicados\u003C\u002Fh3\u003E\\n\u003Cp\u003EUn segundo paso es detectar y eliminar duplicados. Estos pueden ser localizados clasificándolos por un valor único, como el Record ID (en este caso estamos asumiendo que el ID de registro debería ser único para cada entrada). La operación se puede realizar haciendo clic en el triángulo izquierdo de Record ID, luego eligiendo &#39;\u003Cstrong\u003EOrdenar\u003C\u002Fstrong\u003E&#39; ... y seleccionando la viñeta &#39;\u003Cstrong\u003Enúmeros\u003C\u002Fstrong\u003E&#39;. En \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E, la clasificación es sólo una ayuda visual, a menos que hagas permanente el reordenamiento. Para ello, haz clic en el menú Sort que aparece en la parte superior y selecciona &#39;\u003Cstrong\u003EReordenar filas permanentemente\u003C\u002Fstrong\u003E&#39;. Si olvidas hacer esto, obtendrás resultados impredecibles más adelante en este tutorial.\u003C\u002Fp\u003E\\n\u003Cp\u003ELas filas idénticas son ahora adyacentes entre sí. A continuación, dejaremos en blanco el Record ID de las filas que tienen el mismo ID de registro que la fila superior a ellos, marcándolos como duplicados. Para ello, haz clic en el triángulo del campo Record ID, elije \u003Cstrong\u003EEditar celdas\u003C\u002Fstrong\u003E &gt; \u003Cstrong\u003EVaciar hacia abajo\u003C\u002Fstrong\u003E. El mensaje de estado indica que la operación ha afectado a 84 columnas (si olvidaste reordenar las filas permanentemente, obtendrás sólo 19, si es así, deshaz la operación en la pestaña &#39;Deshacer \u002F Rehacer&#39; y vuelve al párrafo anterior para asegurarte de que las filas se reordenan y no están simplemente ordenadas). Elimina estas filas creando una faceta de &#39;\u003Cstrong\u003Eceldas en blanco\u003C\u002Fstrong\u003E&#39; en la columna Record ID (&#39;\u003Cstrong\u003EFacetas\u003C\u002Fstrong\u003E&#39; &gt; &#39;\u003Cstrong\u003EFacetas personalizadas\u003C\u002Fstrong\u003E&#39; &gt; &#39;\u003Cstrong\u003EFaceta por blanco\u003C\u002Fstrong\u003E&#39;), seleccionando las 84 líneas en blanco haciendo clic en &#39;\u003Cstrong\u003Etrue\u003C\u002Fstrong\u003E&#39; y quitándolas usando el triángulo &#39;\u003Cstrong\u003ETodos\u003C\u002Fstrong\u003E&#39; (&#39;\u003Cstrong\u003EEditar filas\u003C\u002Fstrong\u003E&#39; &gt; &#39;\u003Cstrong\u003EEliminar todas las filas que encajen\u003C\u002Fstrong\u003E&#39;). Al cerrar la faceta, verás 75.727 filas únicas.\u003C\u002Fp\u003E\\n\u003Cp\u003ETen en cuenta que se necesita especial precaución al eliminar duplicados. En el paso antes mencionado, suponemos que el conjunto de datos tiene un campo con valores únicos, lo que indica que la fila entera representa un duplicado. Esto no tiene porqué ser necesariamente el caso, por lo que se debe adoptar gran precaución para verificar manualmente si la fila entera representa o no un duplicado.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"separar\\\"\u003ESeparar\u003C\u002Fh3\u003E\\n\u003Cp\u003EUna vez eliminados los registros duplicados, podemos observar más de cerca el campo \u003Cem\u003ECategorías\u003C\u002Fem\u003E. En promedio, a cada objeto se le han atribuido 2,25 categorías. Estas categorías están contenidas dentro del mismo campo, separadas por barras verticales, el carácter &#39;\u003Ccode\u003E|\u003C\u002Fcode\u003E&#39;. El registro 9, por ejemplo, contiene tres: \u003Ccode\u003EMineral samples|Specimens|Mineral Samples-Geological\u003C\u002Fcode\u003E. Para analizar en detalle el uso de las palabras clave, los valores del campo Categorías deben separarse en celdas individuales ayudándonos con la barra vertical, expandiendo los 75.727 registros en 170.167 filas. Seleccione &#39;\u003Cstrong\u003EEditar celdas\u003C\u002Fstrong\u003E&#39;, &#39;\u003Cstrong\u003EDividir celdas multi-valuadas\u003C\u002Fstrong\u003E&#39;, introduciendo &#39;\u003Cstrong\u003E\u003Ccode\u003E|\u003C\u002Fcode\u003E\u003C\u002Fstrong\u003E&#39; como el carácter separador de valores. \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E te informa que tiene ahora 170.167 filas.\u003C\u002Fp\u003E\\n\u003Cp\u003EEs importante entender bien el paradigma filas\u002Fregistros. Haz que la columna Record ID sea visible para ver qué está pasando. Puedes cambiar entre las vistas &#39;filas&#39; y &#39;registros&#39; haciendo clic en los enlaces con ese nombre que están justo encima de los encabezados de las columnas. En la &#39;vista de filas&#39;, cada fila representa un Record ID y una sola categoría emparejados, permitiendo la manipulación de cada uno individualmente. La &#39;vista de registros&#39; tiene una entrada para cada Record ID, que puede tener diferentes categorías en filas diferentes (agrupadas en gris o blanco), pero cada registro se manipula como un todo. Concretamente, ahora hay 170.167 asignaciones de categoría (filas), distribuidas en 75.736 items de la colección (registros). Quizás notaste que hay 9 registros más que los 75.727 originales, pero no te preocupes por esto de momento, regresaremos a esta pequeña diferencia más tarde.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"hacer-facetas-y-agrupar\\\"\u003EHacer facetas y agrupar\u003C\u002Fh3\u003E\\n\u003Cp\u003EUna vez que el contenido de un campo ha sido separado correctamente, pueden aplicarse los filtros, las facetas y los clústeres para dar una visión general rápida y sencilla de los clásicos problemas con metadatos. Mediante la aplicación de la faceta personalizada &#39;\u003Ccode\u003Efaceta por blanco\u003C\u002Fcode\u003E&#39;, se pueden identificar inmediatamente los 461 registros que no tienen una categoría, lo que representa el 0,6% de la colección. La aplicación de una faceta de texto al campo Categorías permite obtener una visión general de las 4.934 categorías diferentes utilizadas en la colección (el límite predeterminado es de 2.000, puedes hacer clic en &#39;\u003Cstrong\u003EEstablecer límite de recuento de opciones\u003C\u002Fstrong\u003E&#39; para aumentarlo a 5.000). Los encabezados pueden ordenarse alfabéticamente o por frecuencia (&#39;conteo&#39;), dando una lista de los términos más utilizados para indexar la colección. Los tres títulos principales son &#39;Numismatics&#39; (8.041), &#39;Ceramics&#39; (7.390) y &#39;Clothing and dress&#39; (7.279).\u003C\u002Fp\u003E\\n\u003Cp\u003ETras la aplicación de una faceta, \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E propone agrupar facetas que han sido elegidas para ser agrupadas basándose en  varios métodos de similitud. Como muestra la Figura 2, el agrupamiento te permite resolver problemas relacionados con inconsistencias de casos, uso incoherente de la forma singular o plural y errores ortográficos sencillos. \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E presenta los valores relacionados y propone fusionarlos en el valor más frecuente. Selecciona los valores que desees agrupar seleccionando individualmente sus casillas o haciendo clic en &#39;\u003Cstrong\u003ESeleccionar todos\u003C\u002Fstrong\u003E&#39; en la parte inferior, luego selecciona &#39;\u003Cstrong\u003EUnir seleccionados y reagrupar\u003C\u002Fstrong\u003E&#39;.\u003C\u002Fp\u003E\\n\u003Cp\u003E{% include figure.html caption=&quot;Figura 2: Visión general de algunas agrupaciones&quot; filename=&quot;visionAgrupaciones.png&quot; %}\u003C\u002Fp\u003E\\n\u003Cp\u003EEl método de agrupación por defecto no es demasiado complejo, por eso no encuentra aún todos los grupos. Experimenta con diferentes métodos para ver qué resultados obtienen. No obstante, ten cuidado: algunos métodos son demasiado agresivos, de forma que podrías terminar agrupando valores que no están relacionados. Ahora que los valores han sido agrupados individualmente, podemos volverlos a unir en una sola celda. Haz clic en el triángulo Categorías y elije \u003Cstrong\u003EEditar celdas\u003C\u002Fstrong\u003E, \u003Cstrong\u003EUnir celdas multi-valuadas\u003C\u002Fstrong\u003E, \u003Cstrong\u003EAceptar\u003C\u002Fstrong\u003E. Elije el carácter barra vertical (\u003Ccode\u003E|\u003C\u002Fcode\u003E) como separador. Las filas ahora se ven como antes, con un campo de Categorías de valor múltiple.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"aplicación-de-transformaciones-ad-hoc-mediante-el-uso-de-expresiones-regulares\\\"\u003EAplicación de transformaciones \u003Cem\u003Ead hoc\u003C\u002Fem\u003E mediante el uso de expresiones regulares\u003C\u002Fh3\u003E\\n\u003Cp\u003EComo recordarás se produjo un aumento en el número de registros tras el proceso de separación: nueve registros aparecieron de la nada. Para encontrar la causa de esta disparidad, necesitamos retroceder en el tiempo hasta antes de que separáramos las categorías en filas diferentes. Para ello, activa la ficha Deshacer\u002FRehacer a la derecha de la ficha Facetas\u002FFiltros y obtendrás un historial de todas las acciones que realizaste desde la creación del proyecto. Selecciona el paso justo antes de &#39;Split multi-valued cells in column Categories&#39;[^5] (Dividir celdas multi-valuadas en la columna categorías) (si has seguido nuestro ejemplo este debería ser &#39;Remove 84 rows&#39; (Eliminar 84 filas)) y luego vuelve a la ficha Facetas\u002FFiltros.\u003C\u002Fp\u003E\\n\u003Cp\u003ELa cuestión surgió durante la operación de división con el carácter barra vertical, por lo que hay una gran probabilidad de que todo lo que salió mal esté vinculado a este carácter. Apliquemos un filtro en la columna Categorías seleccionando &#39;\u003Cstrong\u003EFiltro de texto\u003C\u002Fstrong\u003E&#39; en el menú. Primero escribe un solo \u003Ccode\u003E|\u003C\u002Fcode\u003E en el campo de la izquierda: \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E te informa que hay 71.064 registros coincidentes (es decir, registros que contienen una barra vertical) de un total de 75.727. Las celdas que no contienen una barra vertical pueden estar en blanco, pero también pueden ser celdas que contienen una sola categoría sin separador, como el registro 29 que sólo tiene &#39;Scientific instruments&#39;.\u003C\u002Fp\u003E\\n\u003Cp\u003EAhora ingresa una segunda \u003Ccode\u003E|\u003C\u002Fcode\u003E después de la primera para obtener `||`` (doble barra vertical): podrás ver que 9 registros coinciden con este patrón. Estos son probablemente los 9 registros culpables de nuestra discrepancia: cuando \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E los divide la doble barra vertical se interpreta como una ruptura entre dos registros en lugar de un separador doble sin sentido. Y ahora, ¿cómo corregimos estos valores? Ve al menú del campo &#39;Categorías&#39; y elije &#39;\u003Cstrong\u003EEditar celdas\u003C\u002Fstrong\u003E&#39; &gt; &#39;\u003Cstrong\u003ETransformar...\u003C\u002Fstrong\u003E&#39;. Bienvenido a la interfaz de transformación de texto personalizado, una potente funcionalidad de \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E que usa el Lenguaje de Expresión \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E (GREL).\u003C\u002Fp\u003E\\n\u003Cp\u003ELa palabra &#39;valor&#39; en el campo de texto representa el valor actual de cada celda, que puedes ver a continuación. Podemos modificar este valor aplicándole funciones (véase la \u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002FOpenRefine\u002FOpenRefine\u002Fwiki\u002FGREL-Functions\\\"\u003Edocumentación de GREL\u003C\u002Fa\u003E para una lista completa). En este caso, queremos reemplazar las barras verticales dobles por una sola. Esto puede lograrse introduciendo la siguiente \u003Ca href=\\\"https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FExpresi%C3%B3n_regular\\\"\u003Eexpresión regular\u003C\u002Fa\u003E (asegúrate de no olvidar las comillas):\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode\u003Evalue.replace(&#39;||&#39;,&#39;|&#39;)\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003EBajo el campo de texto &#39;Expression&#39;, obtienes una vista previa de los valores modificados, con las barras verticales dobles eliminadas. Haz clic en \u003Cstrong\u003EAceptar\u003C\u002Fstrong\u003E y vuelve a intentar dividir las categorías con &#39;\u003Cstrong\u003EEditar celdas\u003C\u002Fstrong\u003E&#39; &gt; &#39;\u003Cstrong\u003EDividir celdas multi-valuadas...\u003C\u002Fstrong\u003E&#39;, el número de registros se mantendrá ahora en 75.727 (haz clic en el vínculo &#39;\u003Cstrong\u003Eregistros\u003C\u002Fstrong\u003E&#39; para realizar una doble comprobación).\u003C\u002Fp\u003E\\n\u003Cp\u003E* * *\u003Cbr\u003EOtro problema que se puede resolver con la ayuda de GREL es el problema de los registros para los que la misma categoría se enumera dos veces. Tomemos el registro 41, por ejemplo, cuyas categorías son &#39;Models|Botanical specimens|Botanical Specimens|Didactic Displays|Models&#39;. La categoría &#39;Models&#39; aparece dos veces sin ningún motivo, por lo que queremos eliminar este duplicado. Haz clic en el triángulo del campo Categorías y elije Editar celdas, Unir celdas multi-valuadas, Aceptar. Elije el carácter barra vertical como separador. Ahora las categorías se listan como anteriormente. Luego selecciona &#39;\u003Cstrong\u003EEditar celdas\u003C\u002Fstrong\u003E&#39; &gt; &#39;\u003Cstrong\u003ETransformar\u003C\u002Fstrong\u003E&#39;, también en la columna de categorías. Utilizando GREL podemos dividir sucesivamente las categorías mediante el carácter barra vertical, buscar categorías únicas y unirlas de nuevo. Para hacerlo, simplemente escribe la siguiente expresión:\u003C\u002Fp\u003E\\n\u003Cpre\u003E\u003Ccode\u003Evalue.split(&#39;|&#39;).uniques().join(&#39;|&#39;)\\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\\n\u003Cp\u003ENotarás que 32.599 celdas están afectadas, más de la mitad de la colección.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"exportación-de-tus-datos-limpios\\\"\u003EExportación de tus datos limpios\u003C\u002Fh3\u003E\\n\u003Cp\u003EDesde que cargaste tus datos por primera vez en \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E, todas las operaciones de limpieza se han realizado en la memoria del programa, dejando intacto el conjunto original de datos. Si deseas guardar los datos que has estado limpiando debes exportarlos haciendo clic en el menú &#39;\u003Cstrong\u003EExportar\u003C\u002Fstrong\u003E&#39; en la parte superior derecha de la pantalla. \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E soporta una gran variedad de formatos, como \u003Ca href=\\\"https:\u002F\u002Fes.wikipedia.org\u002Fwiki\u002FValores_separados_por_comas\\\"\u003ECSV\u003C\u002Fa\u003E, HTML o Excel: selecciona lo que mejor te convenga o añade tu propia plantilla de exportación haciendo clic en &#39;Plantilla&#39;. También puedes exportar tu proyecto en el formato interno de \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E para compartirlo con otras personas.\u003C\u002Fp\u003E\\n\u003Ch3 id=\\\"construir-sobre-tus-datos-limpios\\\"\u003EConstruir sobre tus datos limpios\u003C\u002Fh3\u003E\\n\u003Cp\u003EUna vez que tus datos han sido limpiados, puedes dar el siguiente paso y explorar otras características interesantes de \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E. La comunidad de usuarios de \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E ha desarrollado dos extensiones particularmente interesantes que te permiten vincular tus datos a datos que ya se han publicado en la Web. La \u003Ca href=\\\"http:\u002F\u002Fweb.archive.org\u002Fweb\u002F20180113121435\u002Fhttp:\u002F\u002Frefine.deri.ie\u002Fdocs\\\"\u003Eextensión RDF Refine\u003C\u002Fa\u003E transforma las palabras clave de texto sin formato en URLs. La \u003Ca href=\\\"https:\u002F\u002Fgithub.com\u002FRubenVerborgh\u002FRefine-NER-Extension\\\"\u003Eextensión NER\u003C\u002Fa\u003E te permite aplicar el reconocimiento de nombres de entidades (NER), que identifica palabras clave en el texto de los campos textuales y les inserta una URL.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"conclusiones\\\"\u003EConclusiones\u003C\u002Fh2\u003E\\n\u003Cp\u003ESi sólo recordaras una cosa de esta lección, debería ser lo siguiente: \u003Cem\u003Etodos los datos están sucios, pero tú puedes hacer algo para remediarlo\u003C\u002Fem\u003E. Como te hemos mostrado, hay ya bastantes cosas que puedes hacer tú mismo para aumentar significativamente la calidad de los datos. En primer lugar, has aprendido cómo puedes obtener una panorámica rápida de cuántos valores vacíos contiene tu conjunto de datos y con qué frecuencia se utiliza un valor determinado (por ejemplo, una palabra clave) en toda una colección. Estas lecciones también han demostrado cómo resolver problemas recurrentes tales como duplicados e inconsistencias ortográficas de forma automatizada con la ayuda de OpenRefine. No dudes en experimentar con las funciones de limpieza, ya que estás realizando estos pasos en una copia de tu conjunto de datos, y \u003Cem\u003EOpenRefine\u003C\u002Fem\u003E te permite rastrear todos tus pasos (y volver atrás) en el caso de que hayas cometido un error.\u003C\u002Fp\u003E\\n\u003Ch2 id=\\\"notas-de-la-traductora\\\"\u003ENotas de la traductora\u003C\u002Fh2\u003E\\n\u003Cp\u003E[^1]: Denominado también conciliar o reconciliar.\\n[^2]: La página del Museo Powerhouse ha sido modificada desde la publicación original de esta lección en 2013. La página actual que muestra la información de este mismo objeto de la imagen es \u003Ca href=\\\"https:\u002F\u002Fcollection.maas.museum\u002Fobject\u002F11848\\\"\u003Ehttps:\u002F\u002Fcollection.maas.museum\u002Fobject\u002F11848\u003C\u002Fa\u003E\\n[^3]: Es posible que al cargar este proyecto no veas ninguna columna con este color. Esto significa que ningún campo tiene definidos sus valores como numéricos.\\n[^4]: Al cargar el proyecto es muy posible que esta columna aparezca con formato de texto. Para poder aplicar una faceta numérica primero hay que convertirla a formato numérico: &#39;\u003Cstrong\u003EEditar celdas\u003C\u002Fstrong\u003E&#39; &gt; &#39;\u003Cstrong\u003ETransformaciones comunes\u003C\u002Fstrong\u003E&#39; &gt; &#39;\u003Cstrong\u003Ea número\u003C\u002Fstrong\u003E&#39;.\\n[^5]: Esta parte de la interfaz del programa no aparece traducida.\u003C\u002Fp\u003E\\n\"}"}</script></div>
	</body>
</html>
