{"metadata":{"title":"Trabajar con archivos de texto en Python","authors":["William J. Turkel","Adam Crymble"],"date":"2012-07-17T00:00:00.000Z","translation_date":"2017-03-15T00:00:00.000Z","editors":["Miriam Posner"],"reviewers":["Jim Clifford"],"translator":["Víctor Gayol"],"translation-editor":["Adam Crymble"],"translation-reviewer":["Jairo A. Melo","Maria José Afanador-Llach","Antonio Rojas Castro"],"review-ticket":"https://github.com/programminghistorian/ph-submissions/issues/40","layout":"lesson","next":"reutilizacion-de-codigo-y-modularidad","previous":"ver-archivos-html","original":"working-with-text-files","python_warning":false,"difficulty":2,"activity":"transforming","topics":["python"],"abstract":"En esta lección aprenderás a manipular archivos de texto utilizando Python.","avatar_alt":"Dibujo de un señor leyendo el abecedario.","doi":"10.46430/phes0028","sequence":3,"series_total":14},"html_body":"<p>{% include toc.html %}</p>\n<h2 id=\"objetivos-de-la-lección\">Objetivos de la lección</h2>\n<p>En esta lección aprenderás a manipular archivos de texto utilizando Python. Esto incluye abrir, cerrar, leer desde y escribir en archivos <code>.txt</code></p>\n<p>Las siguientes lecciones incluirán descargar páginas web desde Internet y reorganizar los contenidos en fragmentos de información útiles para el análisis. La mayor parte de todo este trabajo se hará usando código escrito en Python mediante Komodo Edit.</p>\n<h2 id=\"trabajar-con-archivos-de-texto\">Trabajar con archivos de texto</h2>\n<p>Python hace muy sencillo el trabajo con archivos y texto. Empecemos por los archivos.</p>\n<h2 id=\"crear-y-escribir-en-un-archivo-de-texto\">Crear y escribir en un archivo de texto</h2>\n<p>Vamos a comenzar con una breve discusión acerca de terminología. En una lección previa, dependiendo del sistema operativo de tu computadora: <a href=\"/es/lecciones/instalacion-mac\">Mac</a>, <a href=\"/es/lecciones/instalacion-windows\">Windows</a>, <a href=\"/es/lecciones/instalacion-linux\">Linux</a>, viste cómo se envía información a la ventana de &quot;comando de salida&quot; en tu editor de texto mediante la utilización del comando <a href=\"https://docs.python.org/2/reference/simple_stmts.html#the-print-statement\">print</a> de Python.</p>\n<pre><code class=\"language-python\">print (‘Hola Mundo&#39;)\n</code></pre>\n<p>El lenguaje de programación Python es del tipo <em>orientado a objetos</em>. Esto quiere decir que está construido alrededor de un tipo especial de entidad, un <em>objeto</em>, que contiene a la vez <em>datos</em> así como una serie de <em>métodos</em> para acceder y alterar los datos. Una vez que se crea un objeto se puede interactuar con otros objetos.</p>\n<p>En el ejemplo de arriba vimos un tipo de objeto, la cadena (<em>string</em>) “Hola Mundo”. La cadena es la secuencia de una serie de caracteres encerrados entre comillas. Puedes escribir una cadena de tres maneras distintas:</p>\n<pre><code>mensaje1 = &#39;hola mundo&#39;\nmensaje2 = &quot;hola mundo&quot;\nmensaje3 = &quot;&quot;&quot;Hola\nhola\nhola mundo&quot;&quot;&quot;\n</code></pre>\n<p>Lo que importa aquí es notar que, como se ve en los dos primeros ejemplos, se pueden utilizar comillas sencillas o dobles, pero nunca se debe mezclar los dos tipos en una misma cadena. En el tercer mensaje, las dobles comillas repetidas tres veces indican una cadena que se extiende por más de una línea.</p>\n<p>Por lo tanto los siguientes mensajes contienen errores:</p>\n<pre><code>mensaje1 = &quot;hola mundo&#39;\nmensaje2 = &#39;hola mundo&quot;\nmensaje3 = &#39;Su nombre es John O&#39;Connor&#39;\n</code></pre>\n<p>Cuenta el número de comillas sencillas en el mensaje3.  Para que esto trabaje correctamente tendremos que <em>salvar</em> el apóstrofe.</p>\n<pre><code class=\"language-python\">mensaje3 = &#39;Su nombre es John O\\&#39;Connor&#39;\n</code></pre>\n<p>O reescribir la frase como:</p>\n<pre><code class=\"language-python\">mensaje3 = &quot;Su nombre es John O&#39;Connor&quot;\n</code></pre>\n<p><code>print</code> es un comando que imprime objetos en forma textual. Al combinar el comando <code>print</code> con una cadena de texto producimos una <em>declaración</em>.</p>\n<p>Utilizarás el comando <code>print</code> de esta forma en los casos en los que se quiera generar información que necesite ser manipulada inmediatamente. Algunas veces, sin embargo, crearás información que necesita ser guardada, enviarla a otra persona, o utilizar como datos de entrada (<em>input</em>) para un procesamiento posterior por otro programa o conjunto de programas. En estos casos querremos enviar información a archivos en el disco duro en vez de enviarla al panel de comando de salida. Escribe el siguiente programa en tu editor de texto y guárdalo como <code>archivo-salida.py</code></p>\n<pre><code class=\"language-python\">#archivo-salida.py\nf = open (&#39;holamundo.txt&#39;,&#39;w&#39;)\nf.write(&#39;hola mundo&#39;)\nf.close()\n</code></pre>\n<p>En Python, cualquier línea que inicia con un símbolo de almohadilla o numeral (#) se llama <em>comentario</em> y es ignorada por el intérprete de Python. Los comentarios están pensados para permitirle a los programadores comunicarse entre ellos (o para recordarse a sí mismos qué es lo que hace el código cuando se sientan frente a él algunos meses después). En un sentido lato, los programas son escritos y formados de una manera que hace más sencillo a los programadores trabajar en colectivo. El código que es más cercano a los requerimientos de la máquina se denomina de <em>bajo nivel</em>, mientras que el código que es más cercano al lenguaje propio de los seres humanos es llamado de <em>alto nivel</em>. Uno de los beneficios de utilizar un lenguaje de programación como Python es que es de mayor alto nivel, lo que hace más sencillo que podamos comunicarnos contigo (claro que con cierto costo en términos de eficiencia informática).</p>\n<p>En este programa <em>f</em> es un <em>objeto</em> mientras que <code>open</code>, <code>write</code> y <code>close</code> son <em>métodos</em>. En otras palabras, <em>open</em>, <em>write</em> y <em>close</em> actúan sobre el objeto <em>f</em> que, en este caso, está definido como un archivo de texto <code>.txt</code>. Problamente, éste es un uso del término “método” que podrías esperar y de vez en cuando encontrarás que las palabras utilizadas en el contexto de la programación tienen un significado ligeramente (o completamente) distinto al del habla de la vida cotidiana. En este caso, conviene recordar que “método” significa fragmentos de código que realizan acciones. Ejecutan algo sobre una cosa y regresan un resultado. Puedes intentar imaginar esto utilizando algún referente del mundo real como, por ejemplo, dar órdenes a tu perro que ha sido educado previamente. Tu mascota (el objeto) entiende órdenes (i.e. tiene “métodos”) como &quot;ladra&quot;, “sentado”, “echado” y así. Discutiremos y aprenderemos cómo usar muchos otros métodos en tanto vayamos avanzando.</p>\n<p><em>f</em> es el nombre de una variable que hemos escogido nosotros. Podríamos haberlo llamado de cualquier manera que se nos hubiera ocurrido. En Python, los nombres de las variables pueden construirse con letras mayúsculas, minúsculas o números. Pero no podemos utilizar los nombres de los comandos del lenguaje como variables. Por ejemplo, si intentamos nombrar a una variable “print”, el programa no responderá porque esa es una <a href=\"https://docs.python.org/release/2.5.4/ref/keywords.html\">palabra reservada</a> que es parte del lenguaje de programación.</p>\n<p>Los nombres de las variables en Python son también sensibles al uso de mayúsculas y minúsculas, lo que significa que trapa, Trapa o TRAPA serían representaciones de distintas variables.</p>\n<p>Cuando ejecutas el programa que escribimos, el método <code>open</code> le dice a tu computadora que produzca un nuevo archivo de texto llamado <code>holamundo.txt</code> en la misma carpeta en la que creamos el programa <code>archivo-salida.py</code>. El <em>parámetro w</em> indica que pretendemos escribir contenido en este nuevo archivo utilizando Python.</p>\n<p>Ten en cuenta que tanto el nombre del archivo como el parámetro están encerrados entre comillas sencillas con lo cual sabes que serán datos almacenados como cadenas. Si te olvidas de incluir las comillas el programa fallará.</p>\n<p>En la línea siguiente tu programa escribe el mensaje &quot;hola mundo&quot; (que es otra cadena) en el archivo y luego lo cierra. (Para mayor información sobre estas declaraciones es importante ver la sección de <a href=\"https://docs.python.org/2/library/stdtypes.html#bltin-file-objects\">file objects</a> en las Referencias de la Biblioteca de Python).</p>\n<p>Haz doble clic en el botón &quot;Ejecutar Python&quot; que creaste en Komodo Edit para correr el programa (o el equivalente en cualquier editor de texto que hayas elegido usar: por ejemplo, haz clic en &quot;#!&quot; en TextWrangler). Y aunque nada estará escrito en el panel del comando de salida, verás un mensaje de estado que dirá algo como esto en Mac o Linux:</p>\n<pre><code class=\"language-python\">`/usr/bin/python archivo-salida.py` returned 0.\n</code></pre>\n<p>Mientras que en Windows se verá:</p>\n<pre><code class=\"language-python\">&#39;C:\\Python27\\Python.exe archivo-salida.py&#39;  returned 0\n</code></pre>\n<p>Esto significa que se ejecutó el programa con éxito. Si utilizas <em>File -&gt; Open -&gt; File</em> en el Komodo Edit, se puede abrir el archivo <code>holamundo.txt</code>. Este debe contener el mensaje de una sola linea:</p>\n<pre><code class=\"language-python\">¡Hola Mundo!\n</code></pre>\n<p>Dado que los archivos de texto plano incluyen la información mínima, tienden a ser de pequeño volumen, fáciles de intercambiar entre diferentes plataformas (por ejemplo, de Windows a Linux o Mac o viceversa), y fáciles de enviar de un programa informático a otro.  También pueden ser leídos en todos los editores de texto como Komodo Edit.</p>\n<h3 id=\"leer-desde-un-archivo-de-texto\">Leer desde un archivo de texto</h3>\n<p>Python también tiene métodos que nos permiten obtener información de los archivos. Escribe el siguiente programa en el editor de texto y guárdalo como <code>archivo-entrada.py</code>. Cuando hagas clic en &quot;Ejecutar Python&quot;, el programa abrirá el archivo de texto que acabas de crear, leerá el texto de una línea que contiene e imprimirá la información en el panel de &quot;comando de salida&quot;.</p>\n<pre><code class=\"language-python\"># archivo-entrada.py\nf = open (&#39;holamundo.txt&#39;,&#39;r&#39;)\nmensaje = f.read()\nprint(mensaje)\nf.close()\n</code></pre>\n<p>En este caso, el parámetro <em>r</em> se utiliza para indicar que estás abriendo un archivo para leer (<code>read</code>) la información que contiene. Los parámetros te permiten escoger entre una serie de diferentes opciones que permita un método en particular. Regresando al ejemplo de la mascota, el perro puede ser adiestrado para ladrar una vez si recibe un premio con sabor a res, y dos si recibe un premio con sabor a pollo. El sabor de la galleta de premio es el parámetro. Cada método es diferente en términos de qué parámetros aceptará. Por ejemplo, no puedes pedirle al perro que cante una ópera italiana -al menos que tu perro sea particularmente talentoso.  Puedes encontrar la posibilidad de parámetros para cada método en particular en el sitio web de Python, o incluso puedes descubrirlos tú mismo en cualquier buscador tecleando el método específico acompañado por la palabra &quot;Python&quot;.</p>\n<p><code>Read</code> es otro método de archivo. El contenido del archivo (el mensaje de una sola línea) es copiado a <em>message</em>, que es como decidimos llamar a esa cadena de texto, y el comando <code>print</code> se utiliza para enviar el contenido recogido en <em>message</em> al panel de comando de salida.</p>\n<h3 id=\"anexar-texto-a-un-archivo-de-texto-preexistente\">Anexar texto a un archivo de texto preexistente</h3>\n<p>Una tercera opción es abrir un archivo preexistente y añadirle más información. Ten en cuenta que si abres un archivo mediante <code>open</code> y usas el método <code>write</code>, el programa <em>sobrescribirá cualquier cosa que el archivo contenga</em>. Por supuesto que esto no es ningún problema cuando se crea un nuevo archivo o cuando se desea sobre-escribir el contenido de un archivo existente, pero es totalmente indeseable cuando estás creando una lista larga de eventos o estás compilando una gran cantidad de datos en un archivo. Así que, en vez de <code> write</code>, vamos a usar el método <code> append</code>, que es designado con una <code> a</code> .</p>\n<p>Escribe el siguiente programa en el editor de texto y guárdalo con el nombre de <code> archivo-apendice.py</code>. Cuando lo ejecutes, este programa abrirá el mismo archivo de texto <code> holamundo.txt</code> que creaste antes y añadirá un segundo &quot;Hola Mundo&quot; al archivo. La sintaxis &#39;\\n&#39; representa una nueva línea de texto en el archivo.</p>\n<pre><code class=\"language-python\"># archivo-apendice.py\nf = open(&#39;holamundo.txt&#39;,&#39;a&#39;)\nf.write(&#39;\\n&#39; + &#39;Hola Mundo&#39;)\nf.close()\n</code></pre>\n<p>Después de que hayas ejecutado el programa, ve al archivo <code>holamundo.txt</code> y ábrelo para ver qué sucedió. Cierra el archivo de texto y vuelve a ejecutar el programa <code>archivo-apendice.py</code> las veces que quieras. Cuando abras nuevamente el archivo <code>holamundo.txt</code> verás que habrá una serie de líneas con el mensaje &quot;Hola Mundo&quot; repetido tantas veces como las que ejecutaste el programa.</p>\n<p>En la siguiente sección discutiremos dos conceptos: modularidad y reutilización de código.</p>\n<h2 id=\"lecturas-recomendadas\">Lecturas recomendadas</h2>\n<ul>\n<li><a href=\"http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_2.6/Hello,_World\">Non-Programmer’s Tutorial for Python 2.6/Hello, World</a></li>\n</ul>\n"}